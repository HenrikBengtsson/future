<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • future</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://future.futureverse.org/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">future</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.30.0-9007</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/future-1-overview.html">A Future for R: A Comprehensive Overview</a>
    </li>
    <li>
      <a href="../articles/future-2-output.html">A Future for R: Text and Message Output</a>
    </li>
    <li>
      <a href="../articles/future-3-topologies.html">A Future for R: Future Topologies</a>
    </li>
    <li>
      <a href="../articles/future-4-issues.html">A Future for R: Common Issues with Solutions</a>
    </li>
    <li>
      <a href="../articles/future-4-non-exportable-objects.html">A Future for R: Non-Exportable Objects</a>
    </li>
    <li>
      <a href="../articles/future-5-startup.html">A Future for R: Controlling Default Future Strategy</a>
    </li>
    <li>
      <a href="../articles/future-6-future-api-backend-specification.html">A Future for R: Future API Backend Specification</a>
    </li>
    <li>
      <a href="../articles/future-7-for-package-developers.html">A Future for R: Best Practices for Package Developers</a>
    </li>
    <li>
      <a href="../articles/future-8-how-future-is-validated.html">A Future for R: How the Future Framework is Validated</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://www.futureverse.org/" class="external-link">
    <span class="fas fa-fast-backward"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://BiocParallel.FutureParam.futureverse.org" class="external-link">BiocParallel.FutureParam</a>
    </li>
    <li>
      <a href="https://doFuture.futureverse.org" class="external-link">doFuture</a>
    </li>
    <li>
      <a href="https://furrr.futureverse.org" class="external-link">furrr</a>
    </li>
    <li>
      <a href="https://future.futureverse.org">future</a>
    </li>
    <li>
      <a href="https://future.apply.futureverse.org" class="external-link">future.apply</a>
    </li>
    <li>
      <a href="https://future.batchtools.futureverse.org" class="external-link">future.batchtools</a>
    </li>
    <li>
      <a href="https://future.callr.futureverse.org" class="external-link">future.callr</a>
    </li>
    <li>
      <a href="https://future.tests.futureverse.org" class="external-link">future.tests</a>
    </li>
    <li>
      <a href="https://globals.futureverse.org" class="external-link">globals</a>
    </li>
    <li>
      <a href="https://listenv.futureverse.org" class="external-link">listenv</a>
    </li>
    <li>
      <a href="https://parallelly.futureverse.org" class="external-link">parallelly</a>
    </li>
    <li>
      <a href="https://progressr.futureverse.org" class="external-link">progressr</a>
    </li>
    <li>
      <a href="https://future.mapreduce.futureverse.org" class="external-link">future.mapreduce (experimental)</a>
    </li>
    <li>
      <a href="https://marshal.futureverse.org" class="external-link">marshal (experimental)</a>
    </li>
  </ul></li>
<li>
  <a href="https://cloud.r-project.org/package=future" class="external-link">
    <span class="fab fa-r-project"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/HenrikBengtsson/future/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/HenrikBengtsson/future/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="development version" id="version-development-version">Version (development version)<a class="anchor" aria-label="anchor" href="#version-development-version"></a></h2>
<div class="section level3">
<h3 id="documentation-development-version">Documentation<a class="anchor" aria-label="anchor" href="#documentation-development-version"></a></h3>
<ul><li>Add example to the ‘Common Issues with Solutions’ vignette on how <strong>magrittr</strong> pipes can result in an error when used with the future assignment operator and how to fix it.</li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-development-version">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-development-version"></a></h3>
<ul><li>Argument <code>local</code> is defunct and has been removed. Previously only <code>local = FALSE</code> was defunct.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.30.0" id="version-1300">Version 1.30.0<small>2022-12-15</small><a class="anchor" aria-label="anchor" href="#version-1300"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-1-30-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-30-0"></a></h3>
<ul><li><p><code><a href="../reference/futureOf.html">futureOf()</a></code> used <code><a href="https://listenv.futureverse.org/reference/mapping.html" class="external-link">listenv::map()</a></code>, which is deprecated in <strong>listenv</strong> (&gt;= 0.9.0) in favor of <code><a href="https://listenv.futureverse.org/reference/mapping.html" class="external-link">listenv::mapping()</a></code>.</p></li>
<li><p>Starting with R (&gt;= 4.2.0), the internal function <code>myInternalIP()</code> no longer detected when an attempted system call failed, resulting in an obscure error instead of falling back to alternatives. This was because errors produced by <code><a href="https://rdrr.io/r/base/system2.html" class="external-link">system2()</a></code> no longer inherits from class <code>simpleError</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-30-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-30-0"></a></h3>
<ul><li>Strategy ‘remote’ was deprecated in <strong>future</strong> 1.24.0 and is now defunct. Use <code>plan(cluster, ..., persistent = TRUE)</code> instead. Note that <code>persistent = TRUE</code> will eventually also become deprecated and defunct, but by then we will have an alternative solution available.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.29.0" id="version-1290">Version 1.29.0<small>2022-11-06</small><a class="anchor" aria-label="anchor" href="#version-1290"></a></h2>
<div class="section level3">
<h3 id="documentation-1-29-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-29-0"></a></h3>
<ul><li>Add section ‘Making sure to stop parallel workers’ to the ‘Best Practices for Package Developers’, which explains why <code>R CMD check</code> may produce “checking for detritus in the temp directory … NOTE” and how to avoid them.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-29-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-29-0"></a></h3>
<ul><li>The evaluation of a <em>sequential</em> future would reset any warnings collected by R prior to creating the future. This only happened with <code>plan(sequential)</code> and when <code>getOption("warn") == 0</code>. This bug was introduced in <strong>future</strong> 1.26.0 [2022-05-27].</li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-29-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-29-0"></a></h3>
<ul><li><p>Using the deprecated <code>plan(multiprocess)</code> will now trigger a deprecation warning <em>each</em> time a <code>multiprocess</code> future is created. This means that there could be a lot of warnings produced. Note that <code>multiprocess</code> has been deprecated since <strong>future</strong> 1.20.0 [2020-10-30]. Please use <code>multisession</code> (recommended) or <code>multicore</code> instead.</p></li>
<li><p>Removing <code>values()</code>, which has been defunct since <strong>future</strong> 1.23.0. Use <code><a href="../reference/value.html">value()</a></code> instead.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.28.0" id="version-1280">Version 1.28.0<small>2022-09-02</small><a class="anchor" aria-label="anchor" href="#version-1280"></a></h2>
<div class="section level3">
<h3 id="documentation-1-28-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-28-0"></a></h3>
<ul><li>Mention how <code>source(..., local = TRUE)</code> is preferred over <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> when used inside futures.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-28-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-28-0"></a></h3>
<ul><li>
<code>do.call(plan, args = list(multisession, workers = 2))</code> would ignore the <code>workers</code> argument, and any other arguments.</li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-28-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-28-0"></a></h3>
<ul><li><p>Previously deprecated use of <code>local = FALSE</code> with futures is now defunct.</p></li>
<li><p>The R option to temporarily allow <code>plan(transparent)</code> although it was declared defunct has now been removed; <code>plan(transparent)</code>, together with functions <code><a href="../reference/remote.html">transparent()</a></code> and <code><a href="../reference/UniprocessFuture-class.html">TransparentFuture()</a></code> are now formally defunct.</p></li>
<li><p>Using argument <code>persistent</code> with multisession futures is now defunct. Previously only <code>persistent = TRUE</code> was defunct.</p></li>
</ul></div>
<div class="section level3">
<h3 id="miscellaneous-1-28-0">Miscellaneous<a class="anchor" aria-label="anchor" href="#miscellaneous-1-28-0"></a></h3>
<ul><li><p>Use CSS style to align image to the right instead of non-HTML5 attribute <code>align="right"</code>.</p></li>
<li><p>Avoid nested <code>&lt;em&gt;</code> tags in HTML-generated help pages.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.27.0" id="version-1270">Version 1.27.0<small>2022-07-22</small><a class="anchor" aria-label="anchor" href="#version-1270"></a></h2>
<div class="section level3">
<h3 id="new-features-1-27-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-27-0"></a></h3>
<ul><li>The fallback to sequential processing done by ‘multicore’ and ‘multisession’ when <code>workers = 1</code> can now be overridden by specifying <code>workers = I(1)</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-27-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-27-0"></a></h3>
<ul><li><p>Some warnings and errors showed the wrong call.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> for <code>FutureResult</code> would report captured conditions all with class <code>list</code>, instead of their condition classes.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.26.1" id="version-1261">Version 1.26.1<small>2022-05-27</small><a class="anchor" aria-label="anchor" href="#version-1261"></a></h2>
<div class="section level3">
<h3 id="miscellaneous-1-26-1">Miscellaneous<a class="anchor" aria-label="anchor" href="#miscellaneous-1-26-1"></a></h3>
<ul><li>TESTS: <code>R CMD check --as-cran</code> on R-devel and MS Windows would trigger a NOTE on “Check: for detritus in the temp directory” and “Found the following files/directories: ‘Rscript1349cb8aeeba0’ …”. There were two package tests that explicitly created PSOCK cluster without stopping them. A third test launched multisession future without resolving it, which prevented the PSOCK worker to terminate. This was not detected in R 4.2.0. It is not a problem on macOS and Linux, because there background workers are automatically terminated when the main R session terminates.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.26.0" id="version-1260">Version 1.26.0<a class="anchor" aria-label="anchor" href="#version-1260"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-26-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-26-0"></a></h3>
<ul><li><p>R options and environment variables are now reset on the workers after future is resolved as they were after any packages required by the future has been loaded and attached. Previously, they were reset to what they were before these were loaded and attached. In addition, only pre-existing R options and environment variables are reset. Any new ones added are not removed for now, because we do not know which added R options or environment variables might have been added from loading a package and that are essential for that package to work.</p></li>
<li><p>If it was changed while evaluating the future expression, the current working directory is now reset when the future has been resolved.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-26-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-26-0"></a></h3>
<ul><li><p><code><a href="../reference/futureSessionInfo.html">futureSessionInfo()</a></code> gained argument <code>anonymize</code>. If TRUE (default), host and user names are anonymized.</p></li>
<li><p><code><a href="../reference/futureSessionInfo.html">futureSessionInfo()</a></code> now also report on the main R session details.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-26-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-26-0"></a></h3>
<ul><li><p>The bug fix in <strong>future</strong> 1.22.0 that addressed the issue where object <code>a</code> in <code>future(fcn(), globals = list(a = 42, fcn = function() a))</code> would not be found has been redesigned in a more robust way.</p></li>
<li><p>Use of packages such as <strong>data.table</strong> and <strong>ff</strong> in cluster and multisession futures broke in <strong>future</strong> 1.25.0. For <strong>data.table</strong>, we saw “Error in setalloccol(ans) : verbose must be TRUE or FALSE”. For <strong>ff</strong>, we saw “Error in splitted$path[nopath] &lt;- getOption(”fftempdir”) : replacement has length zero”. See ‘Significant Changes’ for why and how this was fixed.</p></li>
<li><p>The deprecation warning for using <code>local = FALSE</code> was silenced for sequential futures since <strong>future</strong> 1.25.0.</p></li>
<li><p><code><a href="../reference/future.html">futureCall()</a></code> ignored arguments <code>stdout</code>, <code>conditions</code>, <code>earlySignal</code>, <code>label</code>, and <code>gc</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-26-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-26-0"></a></h3>
<ul><li><p>Strategy ‘transparent’ was deprecated in <strong>future</strong> 1.24.0 and is now defunct. Use <code>plan(sequential, split = TRUE)</code> instead.</p></li>
<li><p>Strategy ‘multiprocess’ was deprecated in <strong>future</strong> 1.20.0, and ‘remote’ was deprecated in <strong>future</strong> 1.24.0. Since then, attempts to use them in <code><a href="../reference/plan.html">plan()</a></code> would produce a deprecation warning, which was limited to one per R session. Starting with this release, this warning is now produced whenever using <code><a href="../reference/plan.html">plan()</a></code> with these deprecated future strategies.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.25.0" id="version-1250">Version 1.25.0<small>2022-04-24</small><a class="anchor" aria-label="anchor" href="#version-1250"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-25-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-25-0"></a></h3>
<ul><li>R options and environment variables are now reset on the workers after future is resolved so that any changes to them by the future expression have no effect on following futures.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-25-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-25-0"></a></h3>
<ul><li><p>Now <code>f &lt;- future(..., stdout = structure(TRUE, drop = TRUE))</code> will cause the captured standard output to be dropped from the future object as soon as it has been relayed once, for instance, by <code>value(f)</code>. Similarly, <code>conditions = structure("conditions", drop =    TRUE)</code> will drop captured non-error conditions as soon as they have been relayed. This can help decrease the amount of memory used, especially if there are many active futures.</p></li>
<li><p>Now <code><a href="../reference/resolve.html">resolve()</a></code> respects option <code>future.wait.interval</code>. Previously, it was hardcoded to poll for results every 0.1 seconds.</p></li>
</ul></div>
<div class="section level3">
<h3 id="beta-features-1-25-0">Beta Features<a class="anchor" aria-label="anchor" href="#beta-features-1-25-0"></a></h3>
<ul><li>Now, <code><a href="../reference/value.html">value()</a></code> will only attempt to recover UTF-8 symbols in the captured standard output if the future was evaluated on an MS Windows that does not support capturing of UTF-8 symbols. Support for UTF-8 capturing on also MS Windows was added in R 4.2.0, but it typically requires an up-to-date MS Windows 10 or MS Windows Server 2022.</li>
</ul></div>
<div class="section level3">
<h3 id="performance-1-25-0">Performance<a class="anchor" aria-label="anchor" href="#performance-1-25-0"></a></h3>
<ul><li>The default value for option <code>future.wait.interval</code> was decreased from 0.2 seconds to 0.01 seconds. This controls the polling frequency for finding an available worker when all workers are currently busy. Starting with this release, this option also controls the polling frequency of <code><a href="../reference/resolve.html">resolve()</a></code>.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-25-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-25-0"></a></h3>
<ul><li>A bug was introduced in <strong>future</strong> 1.24.0 [2022-02-19] that caused future plan tweaking to break, e.g. <code>plan(multicore, workers = 2)</code> and <code>plan(sequential, split = TRUE)</code> introduced breaking side effects to the futures evaluated.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.24.0" id="version-1240">Version 1.24.0<small>2022-02-19</small><a class="anchor" aria-label="anchor" href="#version-1240"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-24-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-24-0"></a></h3>
<ul><li>Now <code>future(..., seed = TRUE)</code> forwards the RNG state in the calling R session. Previously, it would leave it intact.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-24-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-24-0"></a></h3>
<ul><li>Now <code><a href="../reference/plan.html">plan()</a></code> and <code><a href="../reference/tweak.html">tweak()</a></code> preserve calls in arguments, e.g. <code>plan(multisession, workers = 2, rscript_startup = quote(options(socketOptions="no-delay")))</code>, and <code>tweak(..., abc = quote(x == y))</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-24-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-24-0"></a></h3>
<ul><li><p><code><a href="../reference/nbrOfWorkers.html">nbrOfFreeWorkers()</a></code> would produce “Error: ‘is.character(name)’ is not TRUE” for <code>plan(multisession, workers = 1)</code>.</p></li>
<li><p>Internal calls to <code>FutureRegistry(action = "collect-first")</code> and <code>FutureRegistry(action = "collect-last")</code> could signal errors early when polling <code><a href="../reference/resolved.html">resolved()</a></code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-24-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-24-0"></a></h3>
<ul><li><p>Strategy ‘remote’ is deprecated in favor of ‘cluster’. The <code><a href="../reference/plan.html">plan()</a></code> function will give an informative deprecation warning when ‘remote’ is used. For now, this warning is given only once per R session.</p></li>
<li><p>Strategy ‘transparent’ is deprecated in favor of ‘sequential’ with argument <code>split = TRUE</code> set. The <code><a href="../reference/plan.html">plan()</a></code> function will give an informative deprecation warning when ‘transparent’ is used. For now, this warning is given only once per R session.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.23.0" id="version-1230">Version 1.23.0<small>2021-10-31</small><a class="anchor" aria-label="anchor" href="#version-1230"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-23-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-23-0"></a></h3>
<ul><li><p><code><a href="../reference/plan.html">plan()</a></code> now produces a one-time warning if a ‘transparent’ strategy is set. The warning reminds the user that ‘transparent’ should only be used for troubleshooting purposes and never be used in production. These days <code>plan(sequential, split = TRUE)</code> together with <code><a href="https://rdrr.io/r/base/debug.html" class="external-link">debug()</a></code> is probably a better approach for troubleshooting. The long-term plan is to deprecate the ‘transparent’ strategy.</p></li>
<li><p>Support for <code>persistent = TRUE</code> with multisession futures is defunct.</p></li>
</ul></div>
<div class="section level3">
<h3 id="beta-features-1-23-0">Beta Features<a class="anchor" aria-label="anchor" href="#beta-features-1-23-0"></a></h3>
<ul><li>UTF-8 symbols outputted on MS Windows would be relayed as escaped symbols, e.g. a UTF-8 check mark symbol (<code>\u2713</code>) would be relayed as <code>&lt;U+2713&gt;</code> (8 characters). The reason for this is a limitation in R itself on MS Windows. Now, <code><a href="../reference/value.html">value()</a></code> attempts to recover such MS Windows output to UTF-8 before relaying it. There is an option for disabling this new feature.</li>
</ul></div>
<div class="section level3">
<h3 id="miscellaneous-1-23-0">Miscellaneous<a class="anchor" aria-label="anchor" href="#miscellaneous-1-23-0"></a></h3>
<ul><li>TESTS: Using more robust emulation of crashed forked parallel workers after understanding that <code><a href="https://rdrr.io/r/base/quit.html" class="external-link">quit()</a></code> must not be used in forked R processes.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-23-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-23-0"></a></h3>
<ul><li>Now <code>future(..., seed)</code> will set the random seed as late as possible just before the future expression is evaluated. Previously it was done before package dependencies where attached, which could lead to non-reproduce random numbers in case a package dependency would update the RNG seed when attached.</li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-23-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-23-0"></a></h3>
<ul><li><p><code>values()</code>, which has been deprecated since <strong>future</strong> 1.20.0, is now defunct. Use <code><a href="../reference/value.html">value()</a></code> instead.</p></li>
<li><p>Support for <code>persistent = TRUE</code> with multisession futures is defunct. If still needed, a temporary workaround is to use cluster futures. However, it is likely that support for <code>persistent</code> will eventually be deprecated for all future backends.</p></li>
<li><p>Argument <code>value</code> of <code><a href="../reference/resolve.html">resolve()</a></code>, deprecated since <strong>future</strong> 1.15.0, is defunct in favor of argument <code>result</code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.22.1" id="version-1221">Version 1.22.1<small>2021-08-25</small><a class="anchor" aria-label="anchor" href="#version-1221"></a></h2>
<div class="section level3">
<h3 id="miscellaneous-1-22-1">Miscellaneous<a class="anchor" aria-label="anchor" href="#miscellaneous-1-22-1"></a></h3>
<ul><li>Disable package test that emulates crashing of forked parallel workers when using <code>parallel::makeCluster(..., type = "FORK")</code>. This test is disabled on macOS, where it appears that the main R session becomes unstable after the FORK node is terminated.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.22.0" id="version-1220">Version 1.22.0<a class="anchor" aria-label="anchor" href="#version-1220"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-22-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-22-0"></a></h3>
<ul><li><p>A lazy future remains a generic future until it is launched, which means it is not assigned a future backend class until launched.</p></li>
<li><p>Argument <code>seed</code> for <code><a href="../reference/future.html">futureAssign()</a></code> and <code><a href="../reference/future.html">futureCall()</a></code> now defaults to FALSE just like for <code><a href="../reference/future.html">future()</a></code>.</p></li>
<li><p><code>R_FUTURE_*</code> environment variables are now only read when the <strong>future</strong> package is loaded, where they set the corresponding <code>future.*</code> option. Previously, some of these environment variables were queried by different functions as a fallback to when an option was not set. By only parsing them when the package is loaded, it decrease the overhead in functions, and it clarifies that options can be changed at runtime whereas environment variables should only be set at startup.</p></li>
</ul></div>
<div class="section level3">
<h3 id="performance-1-22-0">Performance<a class="anchor" aria-label="anchor" href="#performance-1-22-0"></a></h3>
<ul><li><p>The overhead of initiating futures have been significantly reduced. For example, the roundtrip time for <code>value(future(NULL))</code> is about twice as fast for ‘sequential’, ‘cluster’, and ‘multisession’ futures. For ‘multicore’ futures the roundtrip speedup is about 20%. The speedup comes from pre-compiling the R expression that will be used to resolve the future expression into R expression templates which then can quickly compiled for each future. This speeds up the creation of these expression by ~10 times, compared when re-compiling them each time.</p></li>
<li><p>The default timeout for <code><a href="../reference/resolved.html">resolved()</a></code> was decreased from 0.20 to 0.01 seconds for cluster/multisession and multicore futures, which means they will spend less time waiting for results when they are not available.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-22-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-22-0"></a></h3>
<ul><li><p>Analogously to how globals may be scanned for “non-exportable” objects when option <code>future.globals.onReference</code> is set to <code>"error"</code> or <code>"warning"</code>, <code><a href="../reference/value.html">value()</a></code> will now check for similar problems in the resolved value object. An example of this is <code>f &lt;- future(xml2::read_xml("&lt;body&gt;&lt;/body&gt;"))</code>, which will result in an invalid <code>xml_document</code> object if run in parallel, because such objects cannot be transferred between R processes.</p></li>
<li><p>In addition to specify which condition classes to be captured and relayed, it is now possible to also specify condition classes to be ignored. For example, <code>conditions = structure("condition", exclude = "message")</code> captures all conditions but message conditions.</p></li>
<li><p>Now cluster futures use <code>homogeneous = NULL</code> as the default instead of <code>homogeneous = TRUE</code>. The new default will result in the <strong>parallelly</strong> package trying to infer whether TRUE or FALSE should be used based on the <code>workers</code> argument.</p></li>
<li><p>Now the the post-mortem analysis report of multicore and cluster futures in case their results could not be retrieved include information on globals and their sizes, and if some of them are non-exportable. A similar, detailed report is also produced when a cluster future fails to set up and launch itself on a parallel worker.</p></li>
<li><p>if option <code>future.fork.multithreading.enable</code> is FALSE, <strong>RcppParallel</strong>, in addition to <strong>OpenMP</strong>, is forced to run with a single threaded whenever running in a forked process (=‘multicore’ futures). This is done by setting environment variable <code>RCPP_PARALLEL_NUM_THREADS</code> to 1.</p></li>
<li><p>Add <code><a href="../reference/futureSessionInfo.html">futureSessionInfo()</a></code> to get a quick overview of the future framework, its current setup, and to run simple tests on it.</p></li>
<li><p>Now <code>plan(multicore)</code> warns immediately if multicore processing, that is, forked processing, is not supported, e.g. when running in the RStudio Console.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-22-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-22-0"></a></h3>
<ul><li><p><code>plan(multiprocess, workers = n)</code> did not warn about ‘multiprocess’ being deprecated when argument <code>workers</code> was specified.</p></li>
<li><p><code><a href="../reference/getGlobalsAndPackages.html">getGlobalsAndPackages()</a></code> could throw a false error on “Did you mean to create the future within a function? Invalid future expression tries to use global <code>...</code> variables that do not exist: <some expression>” when <code>...</code> is solely part of a formula or used in some S4 generic functions.</some></p></li>
<li><p>When enabled, option <code>future.globals.onReference</code> could falsely alert on ‘Detected a non-exportable reference (externalptr) in one of the globals (&lt;unknown&gt;) used in the future expression’ in globals, e.g. when using <strong>future.apply</strong> or <strong>furrr</strong> map-reduce functions when using a ‘multisession’ backend.</p></li>
<li><p><code>future(fcn(), globals = list(a = 42, fcn = function() a))</code> would fail with “Error in fcn() : object ‘a’ not found” when using sequential or multicore futures. This affected also map-reduce calls such as <code>future.apply::future_lapply(1, function(x) a,    future.globals = list(a = 42))</code>.</p></li>
<li><p>Resolving a ‘sequential’ future without globals would result in internal several <code>...future.*</code> objects being written to the calling environment, which might be the global environment.</p></li>
<li><p>Environment variable <code>R_FUTURE_PLAN</code> would propagate down with nested futures, forcing itself onto also nested future plans. Now it is unset in nested futures, resulting in a sequential future strategy unless another was explicitly set by <code><a href="../reference/plan.html">plan()</a></code>.</p></li>
<li><p>Transparent futures no longer warn about <code>local = FALSE</code> being deprecated. Although <code>local = FALSE</code> is being deprecated, it is still used internally by ‘transparent’ futures for a while longer. Please do not use ‘transparent’ futures in production code and never in a package.</p></li>
<li><p><code><a href="../reference/remote.html">remote()</a></code> could produce an error on “object ‘homogeneous’ not found”.</p></li>
<li><p><code><a href="../reference/nbrOfWorkers.html">nbrOfFreeWorkers()</a></code> for ‘cluster’ futures assumed that the current plan is set to cluster too.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.21.0" id="version-1210">Version 1.21.0<small>2020-12-10</small><a class="anchor" aria-label="anchor" href="#version-1210"></a></h2>
<div class="section level3">
<h3 id="new-features-1-21-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-21-0"></a></h3>
<ul><li><p>In order to handle them conditionally higher up in the call chain, warnings and errors produced from using the random number generator (RNG) in a future without declaring the intention to use one are now of class <code>RngFutureWarning</code> and <code>RngFutureError</code>, respectively. Both of these classes inherits from <code>RngFutureCondition</code>.</p></li>
<li><p>Now run-time errors from resolving a future take precedence over <code>RngFutureError</code>:s. That is, <code>future({ rnorm(1); log("a") }, seed = FALSE)</code> will signal an error ‘log(“a”)’ instead of an RNG error when option <code>future.rng.onMisuse</code> is set to <code>"error"</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="beta-features-1-21-0">Beta Features<a class="anchor" aria-label="anchor" href="#beta-features-1-21-0"></a></h3>
<ul><li>Add <code><a href="../reference/nbrOfWorkers.html">nbrOfFreeWorkers()</a></code> to query how many workers are free to take on futures immediately. Until all third-party future backends have implemented this, some backends might produce an error saying it is not yet supported.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-21-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-21-0"></a></h3>
<ul><li><p><code>future(..., seed = TRUE)</code> with ‘sequential’ futures would set the RNG kind of the parent process. Now it behaves the same regardless of future backend.</p></li>
<li><p>Signaling <code>immediateCondition</code>:s with ‘multicore’ could result in “Error in save_rds(obj, file) : save_rds() failed to rename temporary save file ‘/tmp/RtmpxNyIyK/progression21f3f31eadc.rds.tmp’ (NA bytes; last modified on NA) to ‘/tmp/RtmpxNyIyK/progression21f3f31eadc.rds’ (NA bytes; last modified on NA)”. There was an assertion at the end of the internal <code><a href="../reference/save_rds.html">save_rds()</a></code> function that incorrectly assumed that the target file should exist. However, the file might have already been processed and removed by the future in the main R session.</p></li>
<li><p><code><a href="../reference/value.html">value()</a></code> with both a run-time error and an RNG mistake would signal the RNG warning instead of the run-time error when the for-internal-use-only argument <code>signal</code> was set to FALSE.</p></li>
<li><p>Due to a mistake introduced in <strong>future</strong> 1.20.0, the package would end up assigning a <code>.packageVersion</code> object to the global environment when loaded.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.20.1" id="version-1201">Version 1.20.1<small>2020-11-03</small><a class="anchor" aria-label="anchor" href="#version-1201"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-1-20-1">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-20-1"></a></h3>
<ul><li>
<code>future::plan("multisession")</code> would produce ‘Error in if (debug) mdebug(“covr::package_coverage() workaround …”) : argument is not interpretable as logical’ if and only if the <strong>covr</strong> package was loaded.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.20.0" id="version-1200">Version 1.20.0<a class="anchor" aria-label="anchor" href="#version-1200"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-20-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-20-0"></a></h3>
<ul><li><p>Strategy ‘multiprocess’ is deprecated in favor of either ‘multisession’ or ‘multicore’, depending on operating system and R setup. The <code><a href="../reference/plan.html">plan()</a></code> function will give an informative deprecation warning when ‘multiprocess’ is used. This warning is given only once per R session.</p></li>
<li><p>Launching R or Rscript with command-line option <code>--parallel=n</code>, where n &gt; 1, will now use ‘multisession’ as future strategy. Previously, it would use ‘multiprocess’, which is now deprecated.</p></li>
<li><p>Support for <code>local = FALSE</code> is deprecated. For the time being, it remains supported for ‘transparent’ futures and ‘cluster’ futures that use <code>persistent = TRUE</code>. However, note that <code>persistent = TRUE</code> will also deprecated at some point in the future. These deprecations are required in order to further standardize the Future API across various types of parallel backends.</p></li>
<li><p>Now multisession workers inherit the package library path from the main R session <em>when they are created</em>, that is, when calling <code>plan(multisession)</code>. To avoid this, use <code>plan(multisession, rscript_libs = NULL)</code>, which is an argument passed down to <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code>. With this update, ‘sequential’, ‘multisession’, and ‘multicore’ futures see the exact same library path.</p></li>
<li><p>Several functions for managing <strong>parallel</strong>-style processing have been moved to a new <strong>parallelly</strong> package. Specifically, functions <code><a href="../reference/re-exports.html">availableCores()</a></code>, <code><a href="../reference/re-exports.html">availableWorkers()</a></code>, <code><a href="../reference/re-exports.html">supportsMulticore()</a></code>, <code><a href="../reference/re-exports.html">as.cluster()</a></code>, <code><a href="../reference/re-exports.html">autoStopCluster()</a></code>, <code><a href="../reference/re-exports.html">makeClusterMPI()</a></code>, <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code>, and <code><a href="../reference/re-exports.html">makeNodePSOCK()</a></code> have been moved. None of them are specific to futures per se and are likely useful elsewhere too. Also, having them in a separate, standalone package will speed up the process of releasing any updates to these functions. The code base of the <strong>future</strong> package shrunk about 10-15% from this migration. For backward compatibility, the migrated functions remain in this package as re-exports.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-20-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-20-0"></a></h3>
<ul><li><p>Setting up a future strategy with argument <code>split = TRUE</code> will cause the standard output and non-error conditions to be split (“tee:d”) on the worker’s end, while still relaying back to the main R session as before. This can be useful when debugging with <code>browse()</code> or <code><a href="https://rdrr.io/r/base/debug.html" class="external-link">debug()</a></code>, e.g. <code>plan(sequential, split = TRUE)</code>. Without it, debug output is not displayed.</p></li>
<li><p>Now multicore futures relay <code>immediateCondition</code>:s in a near-live fashion.</p></li>
<li><p>It is now possible to pass any arguments that <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> accepts in the call to <code>plan(cluster, ...)</code> and <code>plan(multisession, ...)</code>. For instance, to set the working directory of the cluster workers to a temporary folder, pass argument <code>rscript_startup = "setwd(tempdir())"</code>. Another example is <code>rscript_libs = c(libs, "*")</code> to prepend the library path on the worker with the paths in <code>libs</code>.</p></li>
<li><p><code><a href="../reference/plan.html">plan()</a></code> and <code><a href="../reference/tweak.html">tweak()</a></code> check for even more arguments that must not be set by either of them. Specifically, attempts to adjust the following arguments of <code><a href="../reference/future.html">future()</a></code> will result in an error: <code>conditions</code>, <code>envir</code>, <code>globals</code>, <code>packages</code>, <code>stdout</code>, and <code>substitute</code> in addition to already validated <code>lazy</code> and <code>seed</code>.</p></li>
<li><p><code><a href="../reference/tweak.html">tweak()</a></code> now returns a wrapper function that calls the original future strategy function with the modified defaults. Previously, it would make a copy of the original function with modified argument defaults. This new approach will make it possible to introduce new future arguments that can be modified by <code><a href="../reference/tweak.html">tweak()</a></code> and <code><a href="../reference/plan.html">plan()</a></code> without having to update every future backend package, e.g. the new <code>split = TRUE</code> argument.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-20-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-20-0"></a></h3>
<ul><li><p>Add a ‘Best Practices for Package Developers’ vignette.</p></li>
<li><p>Add a ‘How the Future Framework is Validated’ vignette.</p></li>
</ul></div>
<div class="section level3">
<h3 id="miscellaneous-1-20-0">Miscellaneous<a class="anchor" aria-label="anchor" href="#miscellaneous-1-20-0"></a></h3>
<ul><li>Harmonizing Future constructor functions to also use <code>substitute = TRUE</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-20-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-20-0"></a></h3>
<ul><li><p>Since last version, <strong>future</strong> 1.19.1, <code>future(..., conditions = character(0L))</code> would no longer avoid intercepting conditions as intended; instead, it muffles all conditions. From now on, use <code>conditions = NULL</code>.</p></li>
<li><p>Relaying of <code>immediateCondition</code>:s was not near-live for multisession and cluster if the underlying PSOCK cluster used <code>useXDR=FALSE</code> for communication.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> for Future would also print any attributes of its environment.</p></li>
<li><p>The error message produced by <code><a href="../reference/nbrOfWorkers.html">nbrOfWorkers()</a></code> was incomplete.</p></li>
<li><p>Renamed environment variable <code>R_FUTURE_MAKENODEPSOCK_tries</code> used by <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> to <code>R_FUTURE_MAKENODEPSOCK_TRIES</code>.</p></li>
<li><p>The Mandelbrot demo would produce random numbers without declaring so.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-20-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-20-0"></a></h3>
<ul><li><p>Strategy ‘multiprocess’ is deprecated in favor of either ‘multisession’ or ‘multicore’, depending on operating system and R setup.</p></li>
<li><p><code>values()</code> is deprecated. Use <code><a href="../reference/value.html">value()</a></code> instead.</p></li>
<li><p>All backward compatible code for the legacy, defunct, internal <code>Future</code> element <code>value</code> is now removed. Using or relying on it is an error.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.19.1" id="version-1191">Version 1.19.1<small>2020-09-22</small><a class="anchor" aria-label="anchor" href="#version-1191"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-1-19-1">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-19-1"></a></h3>
<ul><li>When passing <code>...</code> as a globals, rather than via arguments, in higher-level map-reduce APIs such as <strong>future.apply</strong> and <strong>furrr</strong>, arguments in <code>...</code> could produce an error on “unused argument”.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.19.0" id="version-1190">Version 1.19.0<a class="anchor" aria-label="anchor" href="#version-1190"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-19-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-19-0"></a></h3>
<ul><li><p>Futures detect when random number generation (RNG) was used to resolve them. If a future uses RNG without parallel RNG was requested, then an informative warning is produced. To request parallel RNG, specify argument <code>seed</code>, e.g. <code>f &lt;- future(rnorm(3), seed = TRUE)</code> or <code>y %&lt;-% { rnorm(3) } %seed% TRUE</code>. Higher-level map-reduce APIs provide similarly named “seed” arguments to achieve the same. To, escalate these warning to errors, set option <code>future.rng.onMisuse</code> to <code>"error"</code>. To silence them, set it to <code>"ignore"</code>.</p></li>
<li><p>Now, all non-captured conditions are muffled, if possible. For instance, <code>future(warning("boom"), conditions = c("message"))</code> will truly muffle the warning regardless of backend used. This was needed to fix below bug.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-19-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-19-0"></a></h3>
<ul><li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> will now retry to create a cluster node up to <code>tries</code> (default: 3) times before giving up. If argument <code>port</code> species more than one port (e.g. <code>port = "random"</code>) then it will also attempt find a valid random port up to <code>tries</code> times before giving up. The pre-validation of the random port is only supported in R (&gt;= 4.0.0) and skipped otherwise.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> skips shell quoting of the elements in <code>rscript</code> if it inherits from <code>AsIs</code>.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code>, or actually <code><a href="../reference/re-exports.html">makeNodePSOCK()</a></code>, gained argument <code>quiet</code>, which can be used to silence output produced by <code>manual = TRUE</code>.</p></li>
<li><p>If multithreading is disabled but multicore futures fail to acknowledge the setting on the current system, then an informative <code>FutureWarning</code> is produced by such futures.</p></li>
<li><p>Now <code><a href="../reference/re-exports.html">availableCores()</a></code> better supports Slurm. Specifically, if environment variable <code>SLURM_CPUS_PER_TASK</code> is not set, which requires that option <code>--slurm-cpus-per-task=n</code> is specified and <code>SLURM_JOB_NUM_NODES=1</code>, then it falls back to using <code>SLURM_CPUS_ON_NODE</code>, e.g. when using <code>--ntasks=n</code>.</p></li>
<li><p>Now <code><a href="../reference/re-exports.html">availableCores()</a></code> and <code><a href="../reference/re-exports.html">availableWorkers()</a></code> supports LSF/OpenLava. Specifically, they acknowledge environment variable <code>LSB_DJOB_NUMPROC</code> and <code>LSB_HOSTS</code>, respectively.</p></li>
</ul></div>
<div class="section level3">
<h3 id="performance-1-19-0">Performance<a class="anchor" aria-label="anchor" href="#performance-1-19-0"></a></h3>
<ul><li>Now <code>plan(multisession)</code>, <code>plan(cluster, workers = &lt;number&gt;)</code>, and <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> which they both use internally, sets up localhost workers twice as fast compared to versions since <strong>future</strong> 1.12.0, which brings it back to par with a bare-bone <code>parallel::makeCluster(...,    setup_strategy = "sequential")</code> setup. The slowdown was introduced in <strong>future</strong> 1.12.0 (2019-03-07) when protection against leaving stray R processes behind from failed worker startup was implemented. This protection now makes use of memoization for speedup.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-19-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-19-0"></a></h3>
<ul><li><p>Sequential and multicore backends, but not multisession, would produce errors on “‘…’ used in an incorrect context” in cases where <code>...</code> was part of argument <code>globals</code> and not the evaluation environment.</p></li>
<li><p>Contrary to other future backends, any conditions produced while resolving a sequential future using <code>future(..., conditions = character())</code> would be signaled, although the most reasonable expectation would be that they are silenced. Now, all non-captured conditions are muffled, if possible.</p></li>
<li><p>Option <code>future.rng.onMisuse</code> was not passed down to nested futures.</p></li>
<li><p>Disabling multithreading in forked processes by setting R option <code>future.fork.multithreading.enable</code> or environment variable <code>R_FUTURE_FORK_MULTITHREADING_ENABLE</code> to <code>FALSE</code> would cause multicore futures to always return value <code>1L</code>. This bug was introduced in <strong>future</strong> 1.17.0 (2020-04-17).</p></li>
<li><p><code><a href="../reference/getGlobalsAndPackages.html">getGlobalsAndPackages()</a></code> did not always return a <code>globals</code> element that was of class <code>FutureGlobals</code>.</p></li>
<li><p><code>getGlobalsAndPackages(..., globals)</code> would recalculate <code>total_size</code> even when it was already calculated or known to be zero.</p></li>
<li><p><code>getGlobalsAndPackages(Formula::Formula(~ x))</code> would produce “the condition has length &gt; 1” warnings (which will become errors in future R versions).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.18.0" id="version-1180">Version 1.18.0<small>2020-07-09</small><a class="anchor" aria-label="anchor" href="#version-1180"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-18-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-18-0"></a></h3>
<ul><li>Support for <code>persistent = TRUE</code> with multisession futures is deprecated.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-18-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-18-0"></a></h3>
<ul><li><p><code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> on <code>RichSOCKcluster</code> gives information not only on the name of the host but also on the version of R and the platform of each node (“worker”), e.g. “Socket cluster with 3 nodes where 2 nodes are on host ‘localhost’ (R version 4.0.0 (2020-04-24), platform x86_64-w64-mingw32), 1 node is on host ‘n3’ (R version 3.6.3 (2020-02-29), platform x86_64-pc-linux-gnu)”.</p></li>
<li><p>Error messages from cluster future failures are now more informative than “Unexpected result (of class ‘NULL’ != ‘FutureResult’)”. For example, if the <strong>future</strong> package is not installed on the worker, then the error message clearly says so. Even, if there is an unexpected result error from a PSOCK cluster future, then the error produced give extra information on node where it failed, e.g. “Unexpected result (of class ‘NULL’ != ‘FutureResult’) retrieved for ClusterFuture future (label = ‘<none>’, expression = ‘…’): This suggests that the communication with <code>ClusterFuture</code> worker (‘RichSOCKnode’ <a href="https://github.com/HenrikBengtsson/future/issues/1" class="external-link">#1</a> on host ‘n3’ (R version 3.6.3 (2020-02-29), platform x86_64-pc-linux-gnu)) is out of sync.”</none></p></li>
<li><p>It is now possible to set environment variables on workers before they are launched by <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> by specify them as as <code>"&lt;name&gt;=&lt;value&gt;"</code> as part of the <code>rscript</code> vector argument, e.g. <code>rscript = c("ABC=123",    "DEF='hello world'", "Rscript")</code>. This works because elements in <code>rscript</code> that match regular expression <code>[[:alpha:]_][[:alnum:]_]*=.*</code> are no longer shell quoted.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> now returns a cluster that in addition to inheriting from <code>SOCKcluster</code> it will also inherit from <code>RichSOCKcluster</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-18-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-18-0"></a></h3>
<ul><li><p>Made <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> and <code><a href="../reference/re-exports.html">makeNodePSOCK()</a></code> agile to the name change from <code>parallel:::.slaveRSOCK()</code> to <code>parallel:::.workRSOCK()</code> in R (&gt;= 4.1.0).</p></li>
<li><p><code>makeClusterPSOCK(..., rscript)</code> will not try to locate <code>rscript[1]</code> if argument <code>homogeneous</code> is FALSE (or inferred to be FALSE).</p></li>
<li><p><code>makeClusterPSOCK(..., rscript_envs)</code> would result in a syntax error when starting the workers due to non-ASCII quotation marks if option <code>useFancyQuotes</code> was not set to FALSE.</p></li>
<li><p><code>plan(list(...))</code> would produce ‘Error in UseMethod(“tweak”) : no applicable method for ’tweak’ applied to an object of class “list”’ if a non-function object named ‘list’ was on the search path.</p></li>
<li><p><code>plan(x$abc)</code> with x &lt;- list(abc = sequential) would produce ‘Error in UseMethod(“tweak”) : no applicable method for ’tweak’ applied to an object of class “c(‘FutureStrategyList’, ‘list’)”’.</p></li>
<li><p>TESTS: <code>R_FUTURE_FORK_ENABLE=false R CMD check ...</code> would produce ‘Error: connections left open: …’ when checking the ‘multiprocess’ example.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-18-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-18-0"></a></h3>
<ul><li><p>Support for <code>persistent = TRUE</code> with multisession futures is deprecated. If still needed, a temporary workaround is to use cluster futures. However, it is likely that support for <code>persistent</code> will eventually be deprecated for all future backends.</p></li>
<li><p>Options <code>future.globals.method</code>, <code>future.globals.onMissing</code>, and <code>future.globals.resolve</code> are deprecated and produce warnings if set. They may only be used for troubleshooting purposes because they may affect how futures are evaluated, which means that reproducibility cannot be guaranteed elsewhere.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.17.0" id="version-1170">Version 1.17.0<small>2020-04-18</small><a class="anchor" aria-label="anchor" href="#version-1170"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-17-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-17-0"></a></h3>
<ul><li>Renamed <code>values()</code> to <code><a href="../reference/value.html">value()</a></code> to clean up and simplify the API.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-17-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-17-0"></a></h3>
<ul><li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> gained argument <code>rscript_envs</code> for setting environment variables in workers on startup, e.g. <code>rscript_envs = c(FOO = "3.14", "BAR")</code>.</p></li>
<li><p>Now the result of a future holds session details in case an error occurred while evaluating the future.</p></li>
</ul></div>
<div class="section level3">
<h3 id="miscellaneous-1-17-0">Miscellaneous<a class="anchor" aria-label="anchor" href="#miscellaneous-1-17-0"></a></h3>
<ul><li>Not all CRAN servers have <code>_R_CHECK_LIMIT_CORES_</code> set. To better emulate CRAN submission checks, the <strong>future</strong> package will, when loaded, set this environment variable to ‘TRUE’ if unset and if <code>R CMD check</code> is running. Note that <code><a href="../reference/re-exports.html">future::availableCores()</a></code> respects <code>_R_CHECK_LIMIT_CORES_</code> and returns at most <code>2L</code> (two cores) if detected.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-17-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-17-0"></a></h3>
<ul><li><p>Any globals named <code>version</code> and <code>has_future</code> would be overwritten with “garbage” values internally.</p></li>
<li><p>Disabling of multi-threading when using ‘multicore’ futures did not work on all platforms.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-17-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-17-0"></a></h3>
<ul><li>All <code>values()</code> S3 methods have been renamed to <code><a href="../reference/value.html">value()</a></code> since they are closely related to the original purpose <code><a href="../reference/value.html">value()</a></code>. The <code>values()</code> methods will continue to work but will soon be formally deprecated and later be made defunct and finally be removed. Please replace all <code>values()</code> with <code><a href="../reference/value.html">value()</a></code> calls.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.16.0" id="version-1160">Version 1.16.0<small>2020-01-16</small><a class="anchor" aria-label="anchor" href="#version-1160"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-16-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-16-0"></a></h3>
<ul><li>Now <code>oplan &lt;- plan(new_strategy)</code> returns the list of all nested strategies previously set, instead of just the strategy on top of this stack. This makes it easier to temporarily use another plan. For the old behavior, use <code>oplan &lt;- plan(new_strategy)[[1]]</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-16-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-16-0"></a></h3>
<ul><li><p>Now <code><a href="../reference/value.html">value()</a></code> detects if a <code>future(..., seed = FALSE)</code> call generated random numbers, which then might give unreliable results because non-parallel safe, non-statistically sound random number generation (RNG) was used. If option <code>future.rng.onMisuse</code> is <code>"warning"</code>, a warning is produced. If <code>"error"</code>, an error is produced. If <code>"ignore"</code> (default), the mistake is silently ignored. Using <code>seed = NULL</code> is like <code>seed = FALSE</code> but without performing the RNG validation.</p></li>
<li><p>For convenience, argument <code>seed</code> of <code><a href="../reference/future.html">future()</a></code> may now also be an ordinary single integer random seed. If so, a L’Ecuyer-CMRG RNG seed is created from this seed. If <code>seed = TRUE</code>, then a L’Ecuyer-CMRG RNG seed based on the current RNG state is used. Use <code>seed = FALSE</code> when it is known that the future does not use RNG.</p></li>
<li><p><code>ClusterFuture</code>:s now relay <code>immediateCondition</code>:s back to the main process momentarily after they are signaled and before the future is resolved.</p></li>
</ul></div>
<div class="section level3">
<h3 id="beta-features-1-16-0">Beta Features<a class="anchor" aria-label="anchor" href="#beta-features-1-16-0"></a></h3>
<ul><li>Add support for automatically disable multi-threading when using ‘multicore’ futures. For now, the default is to allow multi-threaded processing but this might change in the future. To disable multi-threaded, set option <code>future.fork.multithreading.enable</code> or environment variable <code>R_FUTURE_FORK_MULTITHREADING_ENABLE</code> to <code>FALSE</code>. This requires that <strong>RhpcBLASctl</strong> package is installed. Parallelization via multi-threaded processing (done in native code by some packages and externally library) while at the same time using forked (aka “multicore”) parallel processing is unstable in some cases. Note that this is not only true when using <code>plan(multicore)</code> but also when using, for instance, <code><a href="https://rdrr.io/r/parallel/mclapply.html" class="external-link">parallel::mclapply()</a></code>. This is in beta so the above names and options might change later.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-16-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-16-0"></a></h3>
<ul><li><p>Evaluation of futures could fail if the global environment contained <em>functions</em> with the same names as a small set of base R functions, e.g. <code><a href="https://rdrr.io/r/base/raw.html" class="external-link">raw()</a></code>, <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>, and <code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code>.</p></li>
<li><p><code>future(alist(a =))</code> would produce “Error in objectSize_list(x, depth = depth - 1L) : argument”x_kk” is missing, with no default”</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-16-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-16-0"></a></h3>
<ul><li><p><code>Future</code> and <code>FutureResult</code> objects with an internal version 1.7 or older have been deprecated since 1.14.0 (July 2019) and are now defunct.</p></li>
<li><p>Defunct hidden argument <code>progress</code> of <code><a href="../reference/resolve.html">resolve()</a></code>, and hidden arguments/fields <code>condition</code> and <code>calls</code> of <code>FutureResult</code> are now gone.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.15.1" id="version-1151">Version 1.15.1<small>2019-11-25</small><a class="anchor" aria-label="anchor" href="#version-1151"></a></h2>
<div class="section level3">
<h3 id="new-features-1-15-1">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-15-1"></a></h3>
<ul><li>The default range of ports that <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> draws a random port from (when argument <code>port</code> is not specified) can now be controlled by environment variable <code>R_FUTURE_RANDOM_PORTS</code>. The default range is still <code>11000:11999</code> as with the <strong>parallel</strong> package.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-15-1">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-15-1"></a></h3>
<ul><li>The change introduced to <code><a href="../reference/resolved.html">resolved()</a></code> in <strong>future</strong> 1.15.0 would cause lazy futures to block if all workers were occupied.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.15.0" id="version-1150">Version 1.15.0<small>2019-11-08</small><a class="anchor" aria-label="anchor" href="#version-1150"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-15-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-15-0"></a></h3>
<ul><li>
<code><a href="../reference/resolved.html">resolved()</a></code> will now launch lazy futures.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-15-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-15-0"></a></h3>
<ul><li><p>Now the “visibility” of future values is recorded and reflected by <code><a href="../reference/value.html">value()</a></code>.</p></li>
<li><p>Now option <code>future.globals.onReference</code> defaults to environment variable <code>R_FUTURE_GLOBALS_ONREFERENCE</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-15-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-15-0"></a></h3>
<ul><li>Added ‘Troubleshooting’ section to <code><a href="../reference/re-exports.html">?makeClusterPSOCK</a></code> with instructions on how to troubleshoot when the setup of local and remote clusters fail.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-15-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-15-0"></a></h3>
<ul><li><p><code>values()</code> would resignal <code>immediateCondition</code>:s despite those should only be signaled at most once per future.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> could produce warnings like “cannot open file ‘/tmp/alice/Rtmpi69yYF/future.parent=2622.a3e32bc6af7.pid’: No such file”, e.g. when launching R workers running in Docker containers.</p></li>
<li><p>Package would set or update the RNG state of R (<code>.Random.seed</code>) when loaded, which could affect RNG reproducibility.</p></li>
<li><p>Package could set <code>.Random.seed</code> to NULL, instead of removing it, which in turn would produce a warning on “‘.Random.seed’ is not an integer vector but of type ‘NULL’, so ignored” when the next random number generated.</p></li>
<li><p>Now a future assignment to list environments produce more informative error messages if attempting to assign to more than one element.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterMPI()</a></code> did not work for MPI clusters with <code>comm</code> other than <code>1</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-15-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-15-0"></a></h3>
<ul><li><p>Argument <code>value</code> of <code><a href="../reference/resolve.html">resolve()</a></code> is deprecated. Use <code>result</code> instead.</p></li>
<li><p>Use of internal argument <code>evaluator</code> to <code><a href="../reference/future.html">future()</a></code> is now defunct.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.14.0" id="version-1140">Version 1.14.0<small>2019-07-02</small><a class="anchor" aria-label="anchor" href="#version-1140"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-14-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-14-0"></a></h3>
<ul><li><p>All types of conditions are now captured and relayed. Previously, only conditions of class <code>message</code> and <code>warning</code> were relayed.</p></li>
<li><p>If one of the futures in a collection produces an error, then <code>values()</code> will signal that error as soon as it is detected. This means that while calling <code>values()</code> guarantees to resolve all futures, it does not guarantee that the result from all futures are gathered back to the master R session before the error is relayed.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-14-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-14-0"></a></h3>
<ul><li><p><code>values()</code> now relays <code>stdout</code> and signal as soon as possible as long as the standard output and the conditions are relayed in their original order.</p></li>
<li><p>If a captured condition can be “muffled”, then it will be muffled. This helps to prevent conditions from being handled twice by condition handlers when futures are evaluated in the main R session, e.g. <code>plan(sequential)</code>. Messages and warnings were already muffled in the past.</p></li>
<li><p>Forked processing is considered unstable when running R from certain environments, such as the RStudio environment. Because of this, ‘multicore’ futures have been disabled in those cases since <strong>future</strong> 1.13.0. This change caught several RStudio users by surprise. Starting with <strong>future</strong> 1.14.0, an informative one-time-per-session warning will be produced when attempts to use ‘multicore’ is made in non-supported environments such as RStudio. This warning will also be produced when using ‘multiprocess’, which will fall back to using ‘multisession’ futures. The warning can be disabled by setting R option <code>future.supportsMulticore.unstable</code>, or environment variable <code>FUTURE_SUPPORTSMULTICORE_UNSTABLE</code> to <code>"quiet"</code>.</p></li>
<li><p>Now option <code>future.startup.script</code> falls back to environment variable <code>R_FUTURE_STARTUP_SCRIPT</code>.</p></li>
<li><p>Conditions inheriting <code>immediateCondition</code> are signaled as soon as possible. Contrary to other types of conditions, these will be signaled only once per future, despite being collected.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-14-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-14-0"></a></h3>
<ul><li><p>Early signaling did not take place for <code><a href="../reference/resolved.html">resolved()</a></code> for <code>ClusterFuture</code> and <code>MulticoreFuture</code>.</p></li>
<li><p>When early signaling was enabled, functions such as <code><a href="../reference/resolved.html">resolved()</a></code> and <code><a href="../reference/resolve.html">resolve()</a></code> would relay captured conditions multiple times. This would, for instance, result in the same messages and warnings being outputted more than once. Now it is only <code><a href="../reference/value.html">value()</a></code> that will resignal conditions.</p></li>
<li><p>The validation of connections failed to detect when the connection had been serialized (= a <code>NIL</code> external pointer) on some macOS systems.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-14-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-14-0"></a></h3>
<ul><li><p>Argument <code>progress</code> of <code><a href="../reference/resolve.html">resolve()</a></code> is now defunct (was deprecated since <strong>future</strong> 1.12.0). Option <code>future.progress</code> is ignored. This will make room for other progress-update mechanisms that are in the works.</p></li>
<li><p>Usage of internal argument <code>evaluator</code> to <code><a href="../reference/future.html">future()</a></code> is now deprecated.</p></li>
<li><p>Removed defunct argument <code>output</code> from <code><a href="../reference/FutureCondition.html">FutureError()</a></code>.</p></li>
<li><p><code>FutureResult</code> fields/arguments <code>condition</code> and <code>calls</code> are now defunct. Use <code>conditions</code> instead.</p></li>
<li><p><code>Future</code> and <code>FutureResult</code> objects with an internal version 1.7 or older are deprecated and will eventually become defunct. Future backends that implement their own <code>Future</code> classes should update to implement a <code><a href="../reference/result.html">result()</a></code> method instead of a <code><a href="../reference/value.html">value()</a></code> method for their <code>Future</code> classes. All future backends available on CRAN and Bioconductor have already been updated accordingly.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.13.0" id="version-1130">Version 1.13.0<small>2019-05-08</small><a class="anchor" aria-label="anchor" href="#version-1130"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-13-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-13-0"></a></h3>
<ul><li>Forked processing is now disabled by default when running R via RStudio When disabled, ‘multicore’ futures fall back to a ‘sequential’ futures. This update follows from an RStudio recommendation against using <em>forked</em> parallel processing from within RStudio because it is likely to break the RStudio R session. See <code><a href="../reference/re-exports.html">help("supportsMulticore")</a></code> for more details, e.g. how to re-enable process forking. Note that parallelization via ‘multisession’ is unaffected and will still work as before. Also, when forked processing is disabled, or otherwise not supported, using <code>plan("multiprocess")</code> will fall back to using ‘multisession’ futures.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-13-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-13-0"></a></h3>
<ul><li><p>Forked processing can be disabled by setting R option <code>future.fork.enable</code> to FALSE (or environment variable <code>R_FUTURE_FORK_ENABLE=false</code>). When disabled, ‘multicore’ futures fall back to a ‘sequential’ futures even if the operating system supports process forking. If set of TRUE, ‘multicore’ will not fall back to ‘sequential’. If NA, or not set (the default), a set of best-practices rules will decide whether forking is enabled or not. See <code><a href="../reference/re-exports.html">help("supportsMulticore")</a></code> for more details.</p></li>
<li><p>Now <code><a href="../reference/re-exports.html">availableCores()</a></code> also recognizes PBS environment variable <code>NCPUS</code>, because the PBSPro scheduler does not set <code>PBS_NUM_PPN</code>.</p></li>
<li><p>If, option <code>future.availableCores.custom</code> is set to a function, then <code><a href="../reference/re-exports.html">availableCores()</a></code> will call that function and interpret its value as number of cores. Analogously, option <code>future.availableWorkers.custom</code> can be used to specify a hostnames of a set of workers that <code><a href="../reference/re-exports.html">availableWorkers()</a></code> sees. These new options provide a mechanism for anyone to customize <code><a href="../reference/re-exports.html">availableCores()</a></code> and <code><a href="../reference/re-exports.html">availableWorkers()</a></code> in case they do not (yet) recognize, say, environment variables that are specific the user’s compute environment or HPC scheduler.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> gained support for argument <code>rscript_startup</code> for evaluating one or more R expressions in the background R worker prior to the worker event loop launching. This provides a more convenient approach than having to use, say, <code>rscript_args = c("-e", sQuote(code))</code>.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> gained support for argument <code>rscript_libs</code> to control the R package library search path on the workers. For example, to <em>prepend</em> the folder <code>~/R-libs</code> on the workers, use <code>rscript_libs = c("~/R-libs", "*")</code>, where <code>"*"</code> will be resolved to the current <code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code> on the workers.</p></li>
<li><p>Debug messages are now prepended with a timestamp.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-13-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-13-0"></a></h3>
<ul><li>Add vignette on ‘Non-Exportable Objects’ (extracted from another vignette).</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-13-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-13-0"></a></h3>
<ul><li>
<code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> did not shell quote the Rscript executable when running its pre-tests checking whether localhost Rscript processes can be killed by their PIDs or not.</li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-13-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-13-0"></a></h3>
<ul><li>Argument <code>value</code> of <code><a href="../reference/resolve.html">resolve()</a></code> has been renamed to <code>result</code> to better reflect that not only values are collected when this argument is used. Argument <code>value</code> still works for backward compatibility, but will eventually be formally deprecated and then defunct.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.12.0" id="version-1120">Version 1.12.0<small>2019-03-08</small><a class="anchor" aria-label="anchor" href="#version-1120"></a></h2>
<div class="section level3">
<h3 id="new-features-1-12-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-12-0"></a></h3>
<ul><li><p>If <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> fails to create one of many nodes, then it will attempt to stop any nodes that were successfully created. This lowers the risk for leaving R worker processes behind.</p></li>
<li><p>Future results now hold the timestamps when the evaluation of the future started and finished.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-12-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-12-0"></a></h3>
<ul><li><p>Functions no longer produce “partial match of ‘condition’ to ‘conditions’” warnings with <code>options(warnPartialMatchDollar = TRUE)</code>.</p></li>
<li><p>When future infix operators (<code>%conditions%</code>, <code>%globals%</code>, <code>%label%</code>, <code>%lazy%</code>, <code>%packages%</code>, <code>%seed%</code>, and <code>%stdout%</code>) that are intended for future assignments were used in the wrong context, they would incorrectly be applied to the next future created. Now they’re discarded.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> in <strong>future</strong> (&gt;= 1.11.1) produced warnings when argument <code>rscript</code> had <code>length(rscript) &gt; 1</code>.</p></li>
<li><p>Validation of L’Ecuyer-CMRG RNG seeds failed in recent R devel.</p></li>
<li><p>With <code>options(OutDec = ",")</code>, the default value of several argument would resolve to <code>NA_real_</code> rather than a numeric value resulting in errors such as “is.finite(alpha) is not TRUE”.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-12-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-12-0"></a></h3>
<ul><li><p>Argument <code>progress</code> of <code><a href="../reference/resolve.html">resolve()</a></code> is now deprecated.</p></li>
<li><p>Argument <code>output</code> of <code><a href="../reference/FutureCondition.html">FutureError()</a></code> is now defunct.</p></li>
<li><p><code>FutureError</code> no longer inherits <code>simpleError</code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.11.1.1" id="version-11111">Version 1.11.1.1<small>2019-01-26</small><a class="anchor" aria-label="anchor" href="#version-11111"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-1-11-1-1">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-11-1-1"></a></h3>
<ul><li>When <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> fails to connect to a worker, it produces an error with detailed information on what could have happened. In rare cases, another error could be produced when generating the information on what the workers PID is.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.11.1" id="version-1111">Version 1.11.1<a class="anchor" aria-label="anchor" href="#version-1111"></a></h2>
<div class="section level3">
<h3 id="new-features-1-11-1">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-11-1"></a></h3>
<ul><li><p>The defaults of several arguments of <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> and <code><a href="../reference/re-exports.html">makeNodePSOCK()</a></code> can now be controlled via environment variables in addition to R options that was supported in the past. An advantage of using environment variables is that they will be inherited by child processes, also nested ones.</p></li>
<li><p>The printing of future plans is now less verbose when the <code>workers</code> argument is a complex object such as a PSOCK cluster object. Previously, the output would include verbose output of attributes, etc.</p></li>
</ul></div>
<div class="section level3">
<h3 id="software-quality-1-11-1">Software Quality<a class="anchor" aria-label="anchor" href="#software-quality-1-11-1"></a></h3>
<ul><li>TESTS: When the <strong>future</strong> package is loaded, it checks whether <code>R CMD check</code> is running or not. If it is, then a few future-specific environment variables are adjusted such that the tests play nice with the testing environment. For instance, it sets the socket connection timeout for PSOCK cluster workers to 120 seconds (instead of the default 30 days!). This will lower the risk for more and more zombie worker processes cluttering up the test machine (e.g. CRAN servers) in case a worker process is left behind despite the main R processes is terminated. Note that these adjustments are applied automatically to the checks of any package that depends on, or imports, the <strong>future</strong> package.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-11-1">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-11-1"></a></h3>
<ul><li>Whenever <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> would fail to connect to a worker, for instance due to a port clash, then it would leave the R worker process running - also after the main R process terminated. When the worker is running on the same machine, <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> will now attempt to kill such stray R processes. Note that <code><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">parallel::makePSOCKcluster()</a></code> still has this problem.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.11.0" id="version-1110">Version 1.11.0<small>2019-01-21</small><a class="anchor" aria-label="anchor" href="#version-1110"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-11-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-11-0"></a></h3>
<ul><li>Message and warning conditions are now captured and relayed by default.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-11-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-11-0"></a></h3>
<ul><li><p>The future call stack (“traceback”) is now recorded when the evaluation of a future produces an error. Use <code><a href="../reference/backtrace.html">backtrace()</a></code> on the future to retrieve it.</p></li>
<li><p>Now <code><a href="../reference/future.html">futureCall()</a></code> defaults to <code>args = list()</code> making is easier to call functions that do not take arguments, e.g. <code>futureCall(function() 42)</code>.</p></li>
<li><p><code><a href="../reference/plan.html">plan()</a></code> gained argument <code>.skip = FALSE</code>. When TRUE, setting the same future strategy as already set will be skipped, e.g. calling <code>plan(multisession)</code> consecutively will have the same effect as calling it just once.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> produces more informative error messages whenever the setup of R workers fails. Also, its verbose messages are now prefixed with <code>[local output]</code> to help distinguish the output produced by the current R session from that produced by background workers.</p></li>
<li><p>It is now possible to specify what type of SSH clients <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> automatically searches for and in what order, e.g. <code>rshcmd = c("&lt;rstudio-ssh&gt;", "&lt;putty-plink&gt;")</code>.</p></li>
<li><p>Now <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> preserves the global RNG state (<code>.Random.seed</code>) also when it draws a random port number.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> gained argument <code>rshlogfile</code>.</p></li>
<li><p>Cluster futures provide more informative error messages when the communication with the worker node is out of sync.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-11-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-11-0"></a></h3>
<ul><li><p>Argument <code>stdout</code> was forced to TRUE when using single-core multicore or single-core multisession futures.</p></li>
<li><p>When evaluated in a local environment, <code>futureCall(..., globals = "a")</code> would set the value of global <code>a</code> to NULL, regardless if it exists or not and what its true value is.</p></li>
<li><p><code>makeClusterPSOCK(..., rscript = "my_r")</code> would in some cases fail to find the intended <code>my_r</code> executable.</p></li>
<li><p>ROBUSTNESS: A cluster future, including a multisession one, could retrieve results from the wrong workers if a new set of cluster workers had been set up after the future was created/launched but before the results were retrieved. This could happen because connections in R are indexed solely by integers which are recycled when old connections are closed and new ones are created. Now cluster futures assert that the connections to the workers are valid, and if not, an informative error message is produced.</p></li>
<li><p>Calling <code><a href="../reference/result.html">result()</a></code> on a non-resolved <code>UniprocessFuture</code> would signal evaluation errors.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-11-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-11-0"></a></h3>
<ul><li>Removed defunct <code>future::future_lapply()</code>. Please use the one in the <strong>future.apply</strong> package instead.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.10.0" id="version-1100">Version 1.10.0<small>2018-10-17</small><a class="anchor" aria-label="anchor" href="#version-1100"></a></h2>
<div class="section level3">
<h3 id="new-features-1-10-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-10-0"></a></h3>
<ul><li><p>Add support for manually specifying globals in addition to those that are automatically identified via argument <code>globals</code> or <code>%globals%</code>. Two examples are <code>globals = structure(TRUE, add = list(a = 42L, b = 3.14))</code> and <code>globals = structure(TRUE, add = c("a", "b"))</code>. Analogously, attribute <code>ignore</code> can be used to exclude automatically identified globals.</p></li>
<li><p>The error reported when failing to retrieve the results of a future evaluated on a localhost cluster/multisession worker or a forked/multicore worker is now more informative. Specifically, it mentions whether the worker process is still alive or not.</p></li>
<li><p>Add <code>makeClusterMPI(n)</code> for creating MPI-based clusters of a similar kind as <code>parallel::makeCluster(n, type = "MPI")</code> but that also attempts to workaround issues where <code><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">parallel::stopCluster()</a></code> causes R to stall.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> and <code><a href="../reference/re-exports.html">makeClusterMPI()</a></code> gained argument <code>autoStop</code> for controlling whether the cluster should be automatically stopped when garbage collected or not.</p></li>
<li><p>BETA: Now <code><a href="../reference/resolved.html">resolved()</a></code> for <code>ClusterFuture</code> is non-blocking also for clusters of type <code>MPIcluster</code> as created by <code>parallel::makeCluster(..., type = "MPI")</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-10-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-10-0"></a></h3>
<ul><li>On Windows, <code>plan(multiprocess)</code> would not initiate the workers. Instead workers would be set up only when the first future was created.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.9.0" id="version-190">Version 1.9.0<small>2018-07-23</small><a class="anchor" aria-label="anchor" href="#version-190"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-9-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-9-0"></a></h3>
<ul><li>Standard output is now captured and re-outputted when <code><a href="../reference/value.html">value()</a></code> is called. This new behavior can be controlled by the argument <code>stdout</code> to <code><a href="../reference/future.html">future()</a></code> or by specifying the <code>%stdout%</code> operator if a future assignment is used.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-9-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-9-0"></a></h3>
<ul><li><p>R option <code>width</code> is passed down so that standard output is captured consistently across workers and consistently with the master process.</p></li>
<li><p>Now more <code>future.*</code> options are passed down so that they are also acknowledged when using nested futures.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-9-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-9-0"></a></h3>
<ul><li><p>Add vignette on ‘Outputting Text’.</p></li>
<li><p>CLEANUP: Only the core parts of the API are now listed in the help index. This was done to clarify the Future API. Help for non-core parts are still via cross references in the indexed API as well via <code><a href="https://rdrr.io/r/utils/help.html" class="external-link">help()</a></code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-9-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-9-0"></a></h3>
<ul><li><p>When using forced, nested ‘multicore’ parallel processing, such as, <code>plan(list(tweak(multicore, workers = 2), tweak(multicore, workers = 2)))</code>, then the child process would attempt to resolve futures owned by the parent process resulting in an error (on ‘bad error message’).</p></li>
<li><p>When using <code>plan(multicore)</code>, if a forked worker would terminate unexpectedly, it could corrupt the master R session such that any further attempts of using forked workers would fail. A forked worker could be terminated this way if the user pressed <kbd>Ctrl-C</kbd> (the worker receives a <code>SIGINT</code> signal).</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> produced a warning when environment variable <code>R_PARALLEL_PORT</code> was set to <code>random</code> (e.g. as on CRAN).</p></li>
<li><p>Printing a <code><a href="../reference/plan.html">plan()</a></code> could produce an error when the deparsed call used to set up the <code><a href="../reference/plan.html">plan()</a></code> was longer than 60 characters.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-9-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-9-0"></a></h3>
<ul><li><p><code>future::future_lapply()</code> is defunct (gives an error if called). Please use the one in the <strong>future.apply</strong> package instead.</p></li>
<li><p>Argument <code>output</code> of <code><a href="../reference/FutureCondition.html">FutureError()</a></code> is formally deprecated.</p></li>
<li><p>Removed all <code>FutureEvaluationCondition</code> classes and related methods.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.8.1" id="version-181">Version 1.8.1<small>2018-05-03</small><a class="anchor" aria-label="anchor" href="#version-181"></a></h2>
<div class="section level3">
<h3 id="new-features-1-8-1">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-8-1"></a></h3>
<ul><li><p><code><a href="../reference/getGlobalsAndPackages.html">getGlobalsAndPackages()</a></code> gained argument <code>maxSize</code>.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> now produces a more informative warning if environment variable <code>R_PARALLEL_PORT</code> specifies a non-numeric port.</p></li>
<li><p>Now <code><a href="../reference/plan.html">plan()</a></code> gives a more informative error message in case it fails, e.g. when the internal future validation fails and why.</p></li>
<li><p>Added <code>UnexpectedFutureResultError</code> to be used by backends for signaling in a standard way that an unexpected result was retrieved from a worker.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-8-1">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-8-1"></a></h3>
<ul><li><p>When the communication between an asynchronous future and a background R process failed, further querying of the future state/results could end up in an infinite waiting loop. Now the failed communication error is recorded and re-signaled if any further querying attempts.</p></li>
<li><p>Internal, seldom used <code>myExternalIP()</code> failed to recognize IPv4 answers from some of the lookup servers. This could in turn produce another error.</p></li>
<li><p>In R (&gt;= 3.5.0), multicore futures would produce multiple warnings originating from querying whether background processes have completed or not. These warnings are now suppressed.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.8.0" id="version-180">Version 1.8.0<small>2018-04-08</small><a class="anchor" aria-label="anchor" href="#version-180"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-8-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-8-0"></a></h3>
<ul><li>Errors produces when evaluating futures are now (re-)signaled on the master R process as-is with the original content and class attributes.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-8-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-8-0"></a></h3>
<ul><li><p>More errors related to orchestration of futures are of class <code>FutureError</code> to make it easier to distinguish them from future evaluation errors.</p></li>
<li><p>Add support for a richer set of results returned by resolved futures. Previously only the value of the future expression, which could be a captured error to be resignaled, was expected. Now a <code>FutureResult</code> object may be returned instead. Although not supported in this release, this update opens up for reporting on additional information from the evaluation of futures, e.g. captured output, timing and memory benchmarks, etc. Before that can take place, existing future backend packages will have to be updated accordingly.</p></li>
<li><p><code><a href="../reference/backtrace.html">backtrace()</a></code> returns only the last call that produced the error. It is unfortunately not possible to capture the call stack that led up to the error when evaluating a future expression.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-8-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-8-0"></a></h3>
<ul><li><p><code><a href="../reference/value.html">value()</a></code> for <code>MulticoreFuture</code> would not produce an error when a (forked) background R workers would terminate before the future expression is resolved. This was a limitation inherited from the <strong>parallel</strong> package. Now an informative <code>FutureError</code> message is produced.</p></li>
<li><p><code><a href="../reference/value.html">value()</a></code> for <code>MulticoreFuture</code> would not signal errors unless they inherited from <code>simpleError</code> - now it’s enough for them to inherits from <code>error</code>.</p></li>
<li><p><code><a href="../reference/value.html">value()</a></code> for <code>ClusterFuture</code> no longer produces a <code>FutureEvaluationError</code>, but <code>FutureError</code>, if the connection to the R worker has changed (which happens if something as drastic as <code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">closeAllConnections()</a></code> have been called.)</p></li>
<li><p><code>futureCall(..., globals = FALSE)</code> would produce “Error: second argument must be a list”, because the explicit arguments where not exported. This could also happen when specifying globals by name or as a named list.</p></li>
<li><p>Nested futures were too conservative in requiring global variables to exist, even when they were false positives.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-8-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-8-0"></a></h3>
<ul><li><p><code>future::future_lapply()</code> is formally deprecated. Please use the one in the <strong>future.apply</strong> package instead.</p></li>
<li><p>Recently introduced <code>FutureEvaluationCondition</code> classes are deprecated, because they no longer serve a purpose since future evaluation conditions are now signaled as-is.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.7.0" id="version-170">Version 1.7.0<small>2018-02-11</small><a class="anchor" aria-label="anchor" href="#version-170"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-7-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-7-0"></a></h3>
<ul><li>
<code>future_lapply()</code> has moved to the <strong>future.apply</strong> package available on CRAN.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-7-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-7-0"></a></h3>
<ul><li><p>Argument <code>workers</code> of future strategies may now also be a function, which is called without argument when the future strategy is set up and used as is. For instance, <code>plan(multiprocess, workers = halfCores)</code> where <code>halfCores &lt;- function() { max(1, round(</code>availableCores()<code>/ 2)) }</code> will use half of the number of available cores. This is useful when using nested future strategies with remote machines.</p></li>
<li><p>On Windows, <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code>, and therefore <code>plan(multisession)</code> and <code>plan(multiprocess)</code>, will use the SSH client distributed with RStudio as a fallback if neither <code>ssh</code> nor <code>plink</code> is available on the system <code>PATH</code>.</p></li>
<li><p>Now <code><a href="../reference/plan.html">plan()</a></code> makes sure that <code><a href="../reference/nbrOfWorkers.html">nbrOfWorkers()</a></code> will work for the new strategy. This will help catch mistakes such as <code>plan(cluster, workers = cl)</code> where <code>cl</code> is a basic R list rather than a <code>cluster</code> list early on.</p></li>
<li><p>Added <code>%packages%</code> to explicitly control packages to be attached when a future is resolved, e.g. <code>y %&lt;-% { YT[2] } %packages% "data.table"</code>. Note, this is only needed in cases where the automatic identification of global and package dependencies is not sufficient.</p></li>
<li><p>Added condition classes <code>FutureCondition</code>, <code>FutureMessage</code>, <code>FutureWarning</code>, and <code>FutureError</code> representing conditions that occur while a future is setup, launched, queried, or retrieved. They do <em>not</em> represent conditions that occur while evaluating the future expression. For those conditions, new classes <code>FutureEvaluationCondition</code>, <code>FutureEvaulationMessage</code>, <code>FutureEvaluationWarning</code>, and <code>FutureEvaluationError</code> exists.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-7-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-7-0"></a></h3>
<ul><li>Vignette ‘Common Issues with Solutions’ now documents the case where the future framework fails to identify a variable as being global because it is only so conditionally, e.g. <code>if (runif(1) &lt; 1/2) x &lt;- 0; y &lt;- 2 * x</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="beta-features-1-7-0">Beta Features<a class="anchor" aria-label="anchor" href="#beta-features-1-7-0"></a></h3>
<ul><li>Added mechanism for detecting globals that <em>may</em> not be exportable to an external R process (a “worker”). Typically, globals that carry connections and external pointers (<code>externalptr</code>) can not be exported, but there are exceptions. By setting options <code>future.globals.onReference</code> to <code>"warning"</code>, a warning is produced informing the user about potential problems. If <code>"error"</code>, an error is produced. Because there might be false positive, the default is <code>"ignore"</code>, which will cause above scans to be skipped. If there are non-exportable globals and these tests are skipped, a run-time error may be produced only when the future expression is evaluated.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-7-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-7-0"></a></h3>
<ul><li><p>The total size of global variables was overestimated, and dramatically so if defined in the global environment and there were are large objects there too. This would sometimes result in a false error saying that the total size is larger than the allowed limit.</p></li>
<li><p>An assignment such as <code>x &lt;- x + 1</code> where the left-hand side (LHS) <code>x</code> is a global failed to identify <code>x</code> as a global because the right-hand side (RHS) <code>x</code> would override it as a local variable. Updates to the <strong>globals</strong> package fixed this problem.</p></li>
<li><p><code>makeClusterPSOCK(..., renice = 19)</code> would launch each PSOCK worker via <code>nice +19</code> resulting in the error “nice: ‘+19’: No such file or directory”. This bug was inherited from <code><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">parallel::makePSOCKcluster()</a></code>. Now using <code>nice --adjustment=19</code> instead.</p></li>
<li><p>Protection against passing future objects to other futures did not work for future strategy ‘multicore’.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-7-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-7-0"></a></h3>
<ul><li><p><code>future_lapply()</code> has moved to the new <strong>future.apply</strong> package available on CRAN. The <code>future::future_lapply()</code> function will soon be deprecated, then defunct, and eventually be removed from the <strong>future</strong> package. Please update your code to make use of <code><a href="https://future.apply.futureverse.org/reference/future_lapply.html" class="external-link">future.apply::future_lapply()</a></code> instead.</p></li>
<li><p>Dropped defunct ‘eager’ and ‘lazy’ futures; use ‘sequential’ instead.</p></li>
<li><p>Dropped defunct arguments <code>cluster</code> and <code>maxCores</code>; use <code>workers</code> instead.</p></li>
<li><p>In previous version of the <strong>future</strong> package the <code>FutureError</code> class was used to represent both orchestration errors (now <code>FutureError</code>) and evaluation errors (now <code>FutureEvaluationError</code>). Any usage of class <code>FutureError</code> for the latter type of errors is deprecated and should be updated to <code>FutureEvaluationError</code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.6.2" id="version-162">Version 1.6.2<small>2017-10-16</small><a class="anchor" aria-label="anchor" href="#version-162"></a></h2>
<div class="section level3">
<h3 id="new-features-1-6-2">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-6-2"></a></h3>
<ul><li><p>Now <code><a href="../reference/plan.html">plan()</a></code> accepts also strings such as <code>"future::cluster"</code>.</p></li>
<li><p>Now <code>backtrace(x[[ER]])</code> works also for non-environment <code>x</code>:s, e.g. lists.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-6-2">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-6-2"></a></h3>
<ul><li><p>When measuring the size of globals by scanning their content, for certain types of classes the inferred lengths of these objects were incorrect causing internal subset out-of-range issues.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> for <code>Future</code> would output one global per line instead of concatenating the information with commas.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.6.1" id="version-161">Version 1.6.1<small>2017-09-09</small><a class="anchor" aria-label="anchor" href="#version-161"></a></h2>
<div class="section level3">
<h3 id="new-features-1-6-1">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-6-1"></a></h3>
<ul><li>Now exporting <code><a href="../reference/getGlobalsAndPackages.html">getGlobalsAndPackages()</a></code>.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-6-1">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-6-1"></a></h3>
<ul><li>
<code>future_lapply()</code> would give “Error in objectSize.env(x, depth = depth - 1L): object ‘nnn’ not found” when for instance ‘nnn’ is part of an unresolved expression that is an argument value.</li>
</ul></div>
<div class="section level3">
<h3 id="software-quality-1-6-1">Software Quality<a class="anchor" aria-label="anchor" href="#software-quality-1-6-1"></a></h3>
<ul><li>FIX: Some of the package assertion tests made too precise assumptions about the object sizes, which fails with the introduction of ALTREP in R-devel which causes the R’s SEXP header size to change.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.6.0" id="version-160">Version 1.6.0<small>2017-08-13</small><a class="anchor" aria-label="anchor" href="#version-160"></a></h2>
<div class="section level3">
<h3 id="new-features-1-6-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-6-0"></a></h3>
<ul><li>Now <code><a href="../reference/tweak.html">tweak()</a></code>, and hence <code><a href="../reference/plan.html">plan()</a></code>, generates a more informative error message if a non-future function is specified by mistake, e.g. calling <code>plan(cluster)</code> with the <strong>survival</strong> package attached after <strong>future</strong> is equivalent to calling <code>plan(survival::cluster)</code> when <code>plan(future::cluster)</code> was intended.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-6-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-6-0"></a></h3>
<ul><li>
<code><a href="../reference/nbrOfWorkers.html">nbrOfWorkers()</a></code> gave an error with <code>plan(remote)</code>. Fixed by making the ‘remote’ future inherit <code>cluster</code> (as it should).</li>
</ul></div>
<div class="section level3">
<h3 id="software-quality-1-6-0">Software Quality<a class="anchor" aria-label="anchor" href="#software-quality-1-6-0"></a></h3>
<ul><li>TESTS: No longer testing forced termination of forked cluster workers when running on Solaris. The termination was done by launching a future that called <code><a href="https://rdrr.io/r/base/quit.html" class="external-link">quit()</a></code>, but that appeared to have corrupted the main R session when running on Solaris.</li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-6-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-6-0"></a></h3>
<ul><li><p>Formally defunct ‘eager’ and ‘lazy’ futures; use ‘sequential’ instead.</p></li>
<li><p>Dropped previously defunct <code>%&lt;=%</code> and <code>%=&gt;%</code> operators.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.5.0" id="version-150">Version 1.5.0<small>2017-05-26</small><a class="anchor" aria-label="anchor" href="#version-150"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-5-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-5-0"></a></h3>
<ul><li>Multicore and multisession futures no longer reserve one core for the main R process, which was done to lower the risk for producing a higher CPU load than the number of cores available for the R session.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-5-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-5-0"></a></h3>
<ul><li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> now defaults to use the Windows PuTTY software’s SSH client <code>plink -ssh</code>, if <code>ssh</code> is not found.</p></li>
<li><p>Argument <code>homogeneous</code> of <code><a href="../reference/re-exports.html">makeNodePSOCK()</a></code>, a helper function of <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code>, will default to FALSE also if the hostname is a fully qualified domain name (FQDN), that is, it “contains periods”. For instance, <code>c('node1', 'node2.server.org')</code> will use <code>homogeneous = TRUE</code> for the first worker and <code>homogeneous = FALSE</code> for the second.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> now asserts that each cluster node is functioning by retrieving and recording the node’s session information including the process ID of the corresponding R process.</p></li>
<li><p>Nested futures sets option <code>mc.cores</code> to prevent spawning of recursive parallel processes by mistake. Because ‘mc.cores’ controls <em>additional</em> processes, it was previously set to zero. However, since some functions such as <code>mclapply()</code> does not support that, it is now set to one instead.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-5-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-5-0"></a></h3>
<ul><li>Help on <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> gained more detailed descriptions on arguments and what their defaults are.</li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-5-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-5-0"></a></h3>
<ul><li>Formally deprecated eager futures; use sequential instead.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-5-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-5-0"></a></h3>
<ul><li><p><code>future_lapply()</code> with multicore / multisession futures, would use a suboptimal workload balancing where it split up the data in one chunk too many. This is no longer a problem because of how argument <code>workers</code> is now defined for those type of futures (see note on top).</p></li>
<li><p><code>future_lapply()</code>, as well as lazy multicore and lazy sequential futures, did not respect option <code>future.globals.resolve</code>, but was hardcoded to always resolve globals (<code>future.globals.resolve = TRUE</code>).</p></li>
<li><p>When globals larger than the allowed size (option <code>future.globals.maxSize</code>) are detected an informative error message is generated. Previous version introduced a bug causing the error to produce another error.</p></li>
<li><p>Lazy sequential futures would produce an error when resolved if required packages had been detached.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> would not display globals gathered for lazy sequential futures.</p></li>
</ul></div>
<div class="section level3">
<h3 id="software-quality-1-5-0">Software Quality<a class="anchor" aria-label="anchor" href="#software-quality-1-5-0"></a></h3>
<ul><li><p>Added package tests for globals part of formulas part of other globals, e.g. <code>purrr::map(x, ~ rnorm(.))</code>, which requires <strong>globals</strong> (&gt;= 0.10.0).</p></li>
<li><p>Now package tests with <code><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">parallel::makeCluster()</a></code> not only test for <code>type = "PSOCK"</code> clusters but also <code>"FORK"</code> (when supported).</p></li>
<li><p>TESTS: Cleaned up test scripts such that the overall processing time for the tests was roughly halved, while preserving the same test coverage.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.4.0" id="version-140">Version 1.4.0<small>2017-03-13</small><a class="anchor" aria-label="anchor" href="#version-140"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-4-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-4-0"></a></h3>
<ul><li>The default for <code>future_lapply()</code> is now to <em>not</em> generate RNG seeds (<code>future.seed = FALSE</code>). If proper random number generation is needed, use <code>future.seed = TRUE</code>. For more details, see help page.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-4-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-4-0"></a></h3>
<ul><li><p><code><a href="../reference/future.html">future()</a></code> and <code>future_lapply()</code> gained argument <code>packages</code> for explicitly specifying packages to be attached when the futures are evaluated. Note that the default throughout the <strong>future</strong> package is that all globals and all required packages are automatically identified and gathered, so in most cases those do not have to be specified manually.</p></li>
<li><p>The default values for arguments <code>connectTimeout</code> and <code>timeout</code> of <code><a href="../reference/re-exports.html">makeNodePSOCK()</a></code> can now be controlled via global options.</p></li>
</ul></div>
<div class="section level3">
<h3 id="random-number-generation-1-4-0">Random Number Generation<a class="anchor" aria-label="anchor" href="#random-number-generation-1-4-0"></a></h3>
<ul><li><p>Now <code>future_lapply()</code> guarantees that the RNG state of the calling R process after returning is updated compared to what it was before and in the exact same way regardless of <code>future.seed</code> (except FALSE), <code>future.scheduling</code> and future strategy used. This is done in order to guarantee that an R script calling <code>future_lapply()</code> multiple times should be numerically reproducible given the same initial seed.</p></li>
<li><p>It is now possible to specify a pre-generated sequence of <code>.Random.seed</code> seeds to be used for each <code>FUN(x[[i]], ...)</code> call in <code>future_lapply(x, FUN, ...)</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="performance-1-4-0">Performance<a class="anchor" aria-label="anchor" href="#performance-1-4-0"></a></h3>
<ul><li>
<code>future_lapply()</code> scans global variables for non-resolved futures (to resolve them) and calculate their total size once. Previously, each chunk (a future) would redo this.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-4-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-4-0"></a></h3>
<ul><li><p>Now <code>future_lapply(X, FUN, ...)</code> identifies global objects among <code>X</code>, <code>FUN</code> and <code>...</code> recursively until no new globals are found. Previously, only the first level of globals were scanned. This is mostly thanks to a bug fix in <strong>globals</strong> 0.9.0.</p></li>
<li><p>A future that used a global object <code>x</code> of a class that overrides <code><a href="https://rdrr.io/r/base/length.html" class="external-link">length()</a></code> would produce an error if <code>length(x)</code> reports more elements than what can be subsetted.</p></li>
<li><p><code><a href="../reference/nbrOfWorkers.html">nbrOfWorkers()</a></code> gave an error with <code>plan(cluster, workers = cl)</code> where <code>cl</code> is a <code>cluster</code> object created by <code><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">parallel::makeCluster()</a></code>, etc. This prevented for instance <code>future_lapply()</code> to work with such setups.</p></li>
<li><p><code>plan(cluster, workers = cl)</code> where <code>cl &lt;- makeCluster(..., type = MPI")</code> would give an instant error due to an invalid internal assertion.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-4-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-4-0"></a></h3>
<ul><li><p>Previously deprecated arguments <code>maxCores</code> and <code>cluster</code> are now defunct.</p></li>
<li><p>Previously deprecated assignment operators <code>%&lt;=%</code> and <code>%=&gt;%</code> are now defunct.</p></li>
<li><p><code>availableCores(method = "mc.cores")</code> is now defunct in favor of <code>"mc.cores+1"</code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.3.0" id="version-130">Version 1.3.0<small>2017-02-19</small><a class="anchor" aria-label="anchor" href="#version-130"></a></h2>
<div class="section level3">
<h3 id="significant-changes-1-3-0">Significant Changes<a class="anchor" aria-label="anchor" href="#significant-changes-1-3-0"></a></h3>
<ul><li>Where applicable, workers are now initiated when calling <code><a href="../reference/plan.html">plan()</a></code>, e.g. <code>plan(cluster)</code> will set up workers on all cluster nodes. Previously, this only happened when the first future was created.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-3-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-3-0"></a></h3>
<ul><li><p>Renamed ‘eager’ futures to ‘sequential’, e.g. <code>plan(sequential)</code>. The ‘eager’ futures will be deprecated in an upcoming release.</p></li>
<li><p>Added support for controlling whether a future is resolved eagerly or lazily when creating the future, e.g. <code>future(..., lazy = TRUE)</code>, <code>futureAssign(..., lazy = TRUE)</code>, and <code>x %&lt;-% { ... } %lazy% TRUE</code>.</p></li>
<li><p><code><a href="../reference/future.html">future()</a></code>, <code><a href="../reference/future.html">futureAssign()</a></code> and <code><a href="../reference/future.html">futureCall()</a></code> gained argument <code>seed</code>, which specifies a L’Ecuyer-CMRG random seed to be used by the future. The seed for future assignment can be specified via <code>%seed%</code>.</p></li>
<li><p><code><a href="../reference/future.html">futureAssign()</a></code> now passes all additional arguments to <code><a href="../reference/future.html">future()</a></code>.</p></li>
<li><p>Added <code>future_lapply()</code> which supports load balancing (“chunking”) and perfect reproducibility (regardless of type of load balancing and how futures are resolved) via initial random seed.</p></li>
<li><p>Added <code><a href="../reference/re-exports.html">availableWorkers()</a></code>. By default it returns localhost workers according to <code><a href="../reference/re-exports.html">availableCores()</a></code>. In addition, it detects common HPC allocations given in environment variables set by the HPC scheduler.</p></li>
<li><p>The default for <code>plan(cluster)</code> is now <code>workers = availableWorkers()</code>.</p></li>
<li><p>Now <code><a href="../reference/plan.html">plan()</a></code> stops any clusters that were implicitly created. For instance, a multisession cluster created by <code>plan(multisession)</code> will be stopped when <code>plan(eager)</code> is called.</p></li>
<li><p><code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> treats workers that refer to a local machine by its local or canonical hostname as “localhost”. This avoids having to launch such workers over SSH, which may not be supported on all systems / compute cluster.</p></li>
<li><p>Option <code>future.debug = TRUE</code> also reports on total size of globals identified and for cluster futures also the size of the individual global variables exported.</p></li>
<li><p>Option <code>future.wait.timeout</code> (replaces <code>future.wait.times</code>) specifies the maximum waiting time for a free workers (e.g. a core or a compute node) before generating a timeout error.</p></li>
<li><p>Option <code>future.availableCores.fallback</code>, which defaults to environment variable <code>R_FUTURE_AVAILABLECORES_FALLBACK</code> can now be used to specify the default number of cores / workers returned by <code><a href="../reference/re-exports.html">availableCores()</a></code> and <code><a href="../reference/re-exports.html">availableWorkers()</a></code> when no other settings are available. For instance, if <code>R_FUTURE_AVAILABLECORES_FALLBACK=1</code> is set system wide in an HPC environment, then all R processes that uses <code><a href="../reference/re-exports.html">availableCores()</a></code> to detect how many cores can be used will run as single-core processes. Without this fallback setting, and without other core-specifying settings, the default will be to use all cores on the machine, which does not play well on multi-user systems.</p></li>
</ul></div>
<div class="section level3">
<h3 id="globals-1-3-0">Globals<a class="anchor" aria-label="anchor" href="#globals-1-3-0"></a></h3>
<ul><li>Globals part of locally defined functions are now also identified thanks to <strong>globals</strong> (&gt;= 0.8.0) updates.</li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-3-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-3-0"></a></h3>
<ul><li>Lazy futures and <code>plan(lazy)</code> are now deprecated. Instead, use <code>plan(eager)</code> and then <code>f &lt;- future(..., lazy = TRUE)</code> or <code>x %&lt;-% { ... } %lazy% TRUE</code>. The reason behind this is that in some cases code that uses futures only works under eager evaluation (<code>lazy = FALSE</code>; the default), or vice verse. By removing the “lazy” future strategy, the user can no longer override the <code>lazy = TRUE / FALSE</code> that the developer is using.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-3-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-3-0"></a></h3>
<ul><li><p>Creation of cluster futures (including multisession ones) would time out already after 40 seconds if all workers were busy. New default timeout is 30 days (option <code>future.wait.timeout</code>).</p></li>
<li><p><code><a href="../reference/nbrOfWorkers.html">nbrOfWorkers()</a></code> gave an error for <code>plan(cluster, workers)</code> where <code>workers</code> was a character vector or a <code>cluster</code> object of the <strong>parallel</strong> package. Because of this, <code>future_lapply()</code> gave an error with such setups.</p></li>
<li><p><code>availableCores(methods = "_R_CHECK_LIMIT_CORES_")</code> would give an error if not running <code>R CMD check</code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.2.0" id="version-120">Version 1.2.0<small>2016-11-12</small><a class="anchor" aria-label="anchor" href="#version-120"></a></h2>
<div class="section level3">
<h3 id="new-features-1-2-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-2-0"></a></h3>
<ul><li><p>Added <code><a href="../reference/re-exports.html">makeClusterPSOCK()</a></code> - a version of <code><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">parallel::makePSOCKcluster()</a></code> that allows for more flexible control of how PSOCK cluster workers are set up and how they are launched and communicated with if running on external machines.</p></li>
<li><p>Added generic <code><a href="../reference/re-exports.html">as.cluster()</a></code> for coercing objects to cluster objects to be used as in <code>plan(cluster, workers = as.cluster(x))</code>. Also added a <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> implementation for cluster objects such that multiple cluster objects can be combined into a single one.</p></li>
<li><p>Added <code><a href="../reference/sessionDetails.html">sessionDetails()</a></code> for gathering details of the current R session.</p></li>
<li><p><code><a href="../reference/plan.html">plan()</a></code> and <code>plan("list")</code> now prints more user-friendly output.</p></li>
<li><p>On Unix, internal <code>myInternalIP()</code> tries more alternatives for finding the local IP number.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-1-2-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-1-2-0"></a></h3>
<ul><li>
<code>%&lt;=%</code> is deprecated. Use <code>%&lt;-%</code> instead. Same for <code>%=&gt;%</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-2-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-2-0"></a></h3>
<ul><li><p><code>values()</code> for lists and list environments of futures where one or more of the futures resolved to NULL would give an error.</p></li>
<li><p><code><a href="../reference/value.html">value()</a></code> for <code>ClusterFuture</code> would give cryptic error message “Error in stop(ex) : bad error message” if the cluster worker had crashed / terminated. Now it will instead give an error message like “Failed to retrieve the value of <code>ClusterFuture</code> from cluster node <a href="https://github.com/HenrikBengtsson/future/issues/1" class="external-link">#1</a> on ‘localhost’. The reason reported was”error reading from connection”.</p></li>
<li><p>Argument <code>user</code> to <code><a href="../reference/remote.html">remote()</a></code> was ignored (since 1.1.0).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.1" id="version-111">Version 1.1.1<small>2016-10-11</small><a class="anchor" aria-label="anchor" href="#version-111"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-1-1-1">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-1-1"></a></h3>
<ul><li>For the special case where ‘remote’ futures use <code>workers = "localhost"</code> they (again) use the exact same R executable as the main / calling R session (in all other cases it uses whatever <code>Rscript</code> is found in the <code>PATH</code>). This was already indeed implemented in 1.0.1, but with the added support for reverse SSH tunnels in 1.1.0 this default behavior was lost.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.0" id="version-110">Version 1.1.0<small>2016-10-10</small><a class="anchor" aria-label="anchor" href="#version-110"></a></h2>
<div class="section level3">
<h3 id="new-features-1-1-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-1-0"></a></h3>
<ul><li><p>REMOTE CLUSTERS: It is now very simple to use <code><a href="../reference/cluster.html">cluster()</a></code> and <code><a href="../reference/remote.html">remote()</a></code> to connect to remote clusters / machines. As long as you can connect via SSH to those machines, it works also with these future. The new code completely avoids incoming firewall and incoming port forwarding issues previously needed. This is done by using reverse SSH tunneling. There is also no need to worry about internal or external IP numbers.</p></li>
<li><p>Added optional argument <code>label</code> to all futures, e.g. <code>f &lt;- future(42, label = "answer")</code> and <code>v %&lt;-% { 42 } %label% "answer"</code>.</p></li>
<li><p>Added argument <code>user</code> to <code><a href="../reference/cluster.html">cluster()</a></code> and <code><a href="../reference/remote.html">remote()</a></code>.</p></li>
<li><p>Now all <code>Future</code> classes supports <code><a href="../reference/run.html">run()</a></code> for launching the future and <code><a href="../reference/value.html">value()</a></code> calls <code><a href="../reference/run.html">run()</a></code> if the future has not been launched.</p></li>
<li><p>MEMORY: Now <code>plan(cluster, gc = TRUE)</code> causes the background R session to be garbage collected immediately after the value is collected. Since multisession and remote futures are special cases of cluster futures, the same is true for these as well.</p></li>
<li><p>ROBUSTNESS: Now the default future strategy is explicitly set when no strategies are set, e.g. when used nested futures. Previously, only mc.cores was set so that only a single core was used, but now also <code>plan("default")</code> set.</p></li>
<li><p>WORKAROUND: <code><a href="../reference/resolved.html">resolved()</a></code> on cluster futures would block on Linux until future was resolved. This is due to a bug in R. The workaround is to use round the timeout (in seconds) to an integer, which seems to always work / be respected.</p></li>
</ul></div>
<div class="section level3">
<h3 id="globals-1-1-0">Globals<a class="anchor" aria-label="anchor" href="#globals-1-1-0"></a></h3>
<ul><li><p>Global variables part of subassignments in future expressions are recognized and exported (iff found), e.g. <code>x$a &lt;- value</code>, <code>x[["a"]] &lt;- value</code>, and <code>x[1,2,3] &lt;- value</code>.</p></li>
<li><p>Global variables part of formulae in future expressions are recognized and exported (iff found), e.g. <code>y ~ x | z</code>.</p></li>
<li><p>As an alternative to the default automatic identification of globals, it is now also possible to explicitly specify them either by their names (as a character vector) or by their names and values (as a named list), e.g. <code>f &lt;- future({ 2*a }, globals = c("a"))</code> or <code>f &lt;- future({ 2*a }, globals = list(a = 42))</code>. For future assignments one can use the <code>%globals%</code> operator, e.g. <code>y %&lt;-% { 2*a } %globals% c("a")</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-1-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-1-0"></a></h3>
<ul><li>Added vignette on command-line options and other methods for controlling the default type of futures to use.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.1" id="version-101">Version 1.0.1<small>2016-07-04</small><a class="anchor" aria-label="anchor" href="#version-101"></a></h2>
<div class="section level3">
<h3 id="new-features-1-0-1">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-0-1"></a></h3>
<ul><li><p>ROBUSTNESS: For the special case where ‘remote’ futures use <code>workers = "localhost"</code> they now use the exact same R executable as the main / calling R session (in all other cases it uses whatever <code>Rscript</code> is found in the <code>PATH</code>).</p></li>
<li><p><code>FutureError</code> now extends <code>simpleError</code> and no longer the error class of captured errors.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-0-1">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-0-1"></a></h3>
<ul><li>Adding section to vignette on globals in formulas describing how they are currently not automatically detected and how to explicitly export them.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-0-1">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-0-1"></a></h3>
<ul><li><p>Since <strong>future</strong> 0.13.0, a global <code>pkg</code> would be overwritten by the name of the last package attached in future.</p></li>
<li><p>Futures that generated <code><a href="https://rdrr.io/pkg/R.oo/man/Exception.html" class="external-link">R.oo::Exception</a></code> errors, they triggered another internal error.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.0" id="version-100">Version 1.0.0<small>2016-06-24</small><a class="anchor" aria-label="anchor" href="#version-100"></a></h2>
<div class="section level3">
<h3 id="new-features-1-0-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-0-0"></a></h3>
<ul><li><p>Add support for <code>remote(..., myip = "&lt;external&gt;")</code>, which now queries a set of external lookup services in case one of them fails.</p></li>
<li><p>Add <code><a href="../reference/mandelbrot.html">mandelbrot()</a></code> function used in demo to the API for convenience.</p></li>
<li><p>ROBUSTNESS: If <code>.future.R</code> script, which is sourced when the <strong>future</strong> package is attached, gives an error, then the error is ignored with a warning.</p></li>
<li><p>TROUBLESHOOTING: If the future requires attachment of packages, then each namespace is loaded separately and before attaching the package. This is done in order to see the actual error message in case there is a problem while loading the namespace. With <code><a href="https://rdrr.io/r/base/library.html" class="external-link">require()</a></code>/<code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> this error message is otherwise suppressed and replaced with a generic one.</p></li>
</ul></div>
<div class="section level3">
<h3 id="globals-1-0-0">Globals<a class="anchor" aria-label="anchor" href="#globals-1-0-0"></a></h3>
<ul><li><p>Falsely identified global variables no longer generate an error when the future is created. Instead, we leave it to R and the evaluation of the individual futures to throw an error if the a global variable is truly missing. This was done in order to automatically handle future expressions that use non-standard evaluation (NSE), e.g. <code>subset(df, x &lt; 3)</code> where <code>x</code> is falsely identified as a global variable.</p></li>
<li><p>Dropped support for system environment variable <code>R_FUTURE_GLOBALS_MAXSIZE</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-0-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-0-0"></a></h3>
<ul><li><p>DEMO: Now the Mandelbrot demo tiles a single Mandelbrot region with one future per tile. This better illustrates parallelism.</p></li>
<li><p>Documented R options used by the <strong>future</strong> package.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-0-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-0-0"></a></h3>
<ul><li><p>Custom futures based on a constructor function that is defined outside a package gave an error.</p></li>
<li><p><code>plan("default")</code> assumed that the <code>future.plan</code> option was a string; gave an error if it was a function.</p></li>
<li><p>Various future options were not passed on to futures.</p></li>
<li><p>A startup <code>.future.R</code> script is no longer sourced if the <strong>future</strong> package is attached by a future expression.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.15.0" id="version-0150">Version 0.15.0<small>2016-06-14</small><a class="anchor" aria-label="anchor" href="#version-0150"></a></h2>
<div class="section level3">
<h3 id="new-features-0-15-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-15-0"></a></h3>
<ul><li><p>Added remote futures, which are cluster futures with convenient default arguments for simple remote access to R, e.g. <code>plan(remote, workers = "login.my-server.org")</code>.</p></li>
<li><p>Now <code>.future.R</code> (if found in the current directory or otherwise in the user’s home directory) is sourced when the <strong>future</strong> package is attach (but not loaded). This helps separating scripts from configuration of futures.</p></li>
<li><p>Added support for <code>plan(cluster, workers = c("n1", "n2", "n2", "n4"))</code>, where <code>workers</code> (also for <code><a href="../reference/ClusterFuture-class.html">ClusterFuture()</a></code>) is a set of host names passed to <code>parallel::makeCluster(workers)</code>. It can also be the number of localhost workers.</p></li>
<li><p>Added command line option <code>--parallel=&lt;p&gt;</code>, which is long for <code>-p &lt;p&gt;</code>.</p></li>
<li><p>Now command line option <code>-p &lt;p&gt;</code> also set the default future strategy to multiprocessing (if p &gt;= 2 and eager otherwise), unless another strategy is already specified via option <code>future.plan</code> or system environment variable <code>R_FUTURE_PLAN</code>.</p></li>
<li><p>Now <code><a href="../reference/re-exports.html">availableCores()</a></code> also acknowledges environment variable <code>NSLOTS</code> set by Sun/Oracle Grid Engine (SGE).</p></li>
<li><p>MEMORY: Added argument <code>gc = FALSE</code> to all futures. When TRUE, the garbage collector will run at the very end in the process that evaluated the future (just before returning the value). This may help lowering the overall memory footprint when running multiple parallel R processes. The user can enable this by specifying <code>plan(multiprocess, gc = TRUE)</code>. The developer can control this using <code>future(expr, gc = TRUE)</code> or <code>v %&lt;-% { expr } %tweak% list(gc = TRUE)</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="performance-0-15-0">Performance<a class="anchor" aria-label="anchor" href="#performance-0-15-0"></a></h3>
<ul><li>Significantly decreased the overhead of creating a future, particularly multicore futures.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-15-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-15-0"></a></h3>
<ul><li>Future would give an error with <code>plan(list("eager"))</code>, whereas it did work with <code>plan("eager")</code> and <code>plan(list(eager))</code>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.14.0" id="version-0140">Version 0.14.0<small>2016-05-17</small><a class="anchor" aria-label="anchor" href="#version-0140"></a></h2>
<div class="section level3">
<h3 id="new-features-0-14-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-14-0"></a></h3>
<ul><li><p>Added <code><a href="../reference/nbrOfWorkers.html">nbrOfWorkers()</a></code>.</p></li>
<li><p>Added informative <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> method for the <code>Future</code> class.</p></li>
<li><p><code>values()</code> passes arguments <code>...</code> to <code><a href="../reference/value.html">value()</a></code> of each future.</p></li>
<li><p>Added <code>FutureError</code> class.</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-and-defunct-0-14-0">Deprecated and Defunct<a class="anchor" aria-label="anchor" href="#deprecated-and-defunct-0-14-0"></a></h3>
<ul><li>Renamed arguments <code>maxCores</code> and <code>cluster</code> to <code>workers</code>. If using the old argument names a deprecation warning will be generated, but it will still work until made defunct in a future release.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-14-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-14-0"></a></h3>
<ul><li>
<code><a href="../reference/resolve.html">resolve()</a></code> for lists and environments did not work properly when the set of futures was not resolved in order, which could happen with asynchronous futures.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.13.0" id="version-0130">Version 0.13.0<small>2016-04-14</small><a class="anchor" aria-label="anchor" href="#version-0130"></a></h2>
<div class="section level3">
<h3 id="new-features-0-13-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-13-0"></a></h3>
<ul><li><p>Add support to <code><a href="../reference/plan.html">plan()</a></code> for specifying different future strategies for the different levels of nested futures.</p></li>
<li><p>Add <code><a href="../reference/backtrace.html">backtrace()</a></code> for listing the trace the expressions evaluated (the calls made) before a condition was caught.</p></li>
<li><p>Add transparent futures, which are eager futures with early signaling of conditioned enabled and whose expression is evaluated in the calling environment. This makes the evaluation of such futures as similar as possible to how R evaluates expressions, which in turn simplifies troubleshooting errors, etc.</p></li>
<li><p>Add support for early signaling of conditions. The default is (as before) to signal conditions when the value is queried. In addition, they may be signals as soon as possible, e.g. when checking whether a future is resolved or not.</p></li>
<li><p>Signaling of conditions when calling <code><a href="../reference/value.html">value()</a></code> is now controlled by argument <code>signal</code> (previously <code>onError</code>).</p></li>
<li><p>Now <code>UniprocessFuture</code>:s captures the call stack for errors occurring while resolving futures.</p></li>
<li><p><code><a href="../reference/ClusterFuture-class.html">ClusterFuture()</a></code> gained argument <code>persistent = FALSE</code>. With <code>persistent = TRUE</code>, any objects in the cluster R session that was created during the evaluation of a previous future is available for succeeding futures that are evaluated in the same session. Moreover, globals are still identified and exported but “missing” globals will not give an error - instead it is assumed such globals are available in the environment where the future is evaluated.</p></li>
<li><p>OVERHEAD: Utility functions exported by <code>ClusterFuture</code> are now much smaller; previously they would export all of the package environment.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-13-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-13-0"></a></h3>
<ul><li><p><code>f &lt;- multicore(NA, maxCores = 2)</code> would end up in an endless waiting loop for a free core if <code><a href="../reference/re-exports.html">availableCores()</a></code> returned one.</p></li>
<li><p><code><a href="../reference/ClusterFuture-class.html">ClusterFuture()</a></code> would ignore <code>local = TRUE</code>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.12.0" id="version-0120">Version 0.12.0<small>2016-02-24</small><a class="anchor" aria-label="anchor" href="#version-0120"></a></h2>
<div class="section level3">
<h3 id="new-features-0-12-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-12-0"></a></h3>
<ul><li><p>Added multiprocess futures, which are multicore futures if supported, otherwise multisession futures. This makes it possible to use <code>plan(multiprocess)</code> everywhere regardless of operating system.</p></li>
<li><p>Future strategy functions gained class attributes such that it is possible to test what type of future is currently used, e.g. <code>inherits(plan(), "multicore")</code>.</p></li>
<li><p>ROBUSTNESS: It is only the R process that created a future that can resolve it. If a non-resolved future is queried by another R process, then an informative error is generated explaining that this is not possible.</p></li>
<li><p>ROBUSTNESS: Now <code><a href="../reference/value.html">value()</a></code> for multicore futures detects if the underlying forked R process was terminated before completing and if so generates an informative error messages.</p></li>
</ul></div>
<div class="section level3">
<h3 id="performance-0-12-0">Performance<a class="anchor" aria-label="anchor" href="#performance-0-12-0"></a></h3>
<ul><li>Adjusted the parameters for the schema used to wait for next available cluster node such that nodes are polled more frequently.</li>
</ul></div>
<div class="section level3">
<h3 id="globals-0-12-0">Globals<a class="anchor" aria-label="anchor" href="#globals-0-12-0"></a></h3>
<ul><li><p><code><a href="../reference/resolve.html">resolve()</a></code> gained argument <code>recursive</code>.</p></li>
<li><p>Added option <code>future.globals.resolve</code> for controlling whether global variables should be resolved for futures or not. If TRUE, then globals are searched recursively for any futures and if found such “global” futures are resolved. If FALSE, global futures are not located, but if they are later trying to be resolved by the parent future, then an informative error message is generated clarifying that only the R process that created the future can resolve it. The default is currently FALSE.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-12-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-12-0"></a></h3>
<ul><li><p>FIX: Exports of objects available in packages already attached by the future were still exported.</p></li>
<li><p>FIX: Now <code><a href="../reference/re-exports.html">availableCores()</a></code> returns <code>3L</code> (=<code>2L+1L</code>) instead of <code>2L</code> if <code>_R_CHECK_LIMIT_CORES_</code> is set.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.11.0" id="version-0110">Version 0.11.0<small>2016-01-20</small><a class="anchor" aria-label="anchor" href="#version-0110"></a></h2>
<div class="section level3">
<h3 id="new-features-0-11-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-11-0"></a></h3>
<ul><li><p>Add multisession futures, which analogously to multicore ones, use multiple cores on the local machine with the difference that they are evaluated in separate R session running in the background rather than separate forked R processes. A multisession future is a special type of cluster futures that do not require explicit setup of cluster nodes.</p></li>
<li><p>Add support for cluster futures, which can make use of a cluster of nodes created by <code><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">parallel::makeCluster()</a></code>.</p></li>
<li><p>Add <code><a href="../reference/future.html">futureCall()</a></code>, which is for futures what <code><a href="https://rdrr.io/pkg/BiocGenerics/man/do.call.html" class="external-link">do.call()</a></code> is otherwise.</p></li>
<li><p>Standardized how options are named, i.e. <code>future.&lt;option&gt;</code>. If you used any future options previously, make sure to check they follow the above format.</p></li>
</ul></div>
<div class="section level3">
<h3 id="globals-0-11-0">Globals<a class="anchor" aria-label="anchor" href="#globals-0-11-0"></a></h3>
<ul><li>All futures now validates globals by default (<code>globals = TRUE</code>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.10.0" id="version-0100">Version 0.10.0<small>2015-12-31</small><a class="anchor" aria-label="anchor" href="#version-0100"></a></h2>
<div class="section level3">
<h3 id="new-features-0-10-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-10-0"></a></h3>
<ul><li><p>Now <code>%&lt;=%</code> can also assign to multi-dimensional list environments.</p></li>
<li><p>Add <code><a href="../reference/futures.html">futures()</a></code>, <code>values()</code> and <code><a href="../reference/resolved.html">resolved()</a></code>.</p></li>
<li><p>Add <code><a href="../reference/resolve.html">resolve()</a></code> to resolve futures in lists and environments.</p></li>
<li><p>Now <code><a href="../reference/re-exports.html">availableCores()</a></code> also acknowledges the number of CPUs allotted by Slurm.</p></li>
<li><p>CLEANUP: Now the internal future variable created by <code>%&lt;=%</code> is removed when the future variable is resolved.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-10-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-10-0"></a></h3>
<ul><li>
<code>futureOf(envir = x)</code> did not work properly when <code>x</code> was a list environment.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.9.0" id="version-090">Version 0.9.0<small>2015-12-12</small><a class="anchor" aria-label="anchor" href="#version-090"></a></h2>
<div class="section level3">
<h3 id="new-features-0-9-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-9-0"></a></h3>
<ul><li><p>ROBUSTNESS: Now values of environment variables are trimmed before being parsed.</p></li>
<li><p>ROBUSTNESS: Add reproducibility test for random number generation using Pierre L’Ecuyer’s RNG stream regardless of how futures are evaluated, e.g. eager, lazy and multicore.</p></li>
</ul></div>
<div class="section level3">
<h3 id="globals-0-9-0">Globals<a class="anchor" aria-label="anchor" href="#globals-0-9-0"></a></h3>
<ul><li>Now globals (“unknown” variables) are identified using the new <code>findGlobals(..., method = "ordered")</code> in <strong>globals</strong> (&gt; 0.5.0) such that a global variable preceding a local variable with the same name is properly identified and exported/frozen.</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-0-9-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-0-9-0"></a></h3>
<ul><li>Updated vignette on common issues with the case where a global variable is not identified because it is hidden by an element assignment in the future expression.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-9-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-9-0"></a></h3>
<ul><li>Errors occurring in multicore futures could prevent further multicore futures from being created.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.8.2" id="version-082">Version 0.8.2<small>2015-10-14</small><a class="anchor" aria-label="anchor" href="#version-082"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-8-2">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-8-2"></a></h3>
<ul><li><p>Globals that were copies of package objects were not exported to the future environments.</p></li>
<li><p>The <strong>future</strong> package had to be attached or <code><a href="../reference/future.html">future::future()</a></code> had to be imported, if <code>%&lt;=%</code> was used internally in another package. Similarly, it also had to be attached if multicore futures where used.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.8.1" id="version-081">Version 0.8.1<small>2015-10-05</small><a class="anchor" aria-label="anchor" href="#version-081"></a></h2>
<div class="section level3">
<h3 id="documentation-0-8-1">Documentation<a class="anchor" aria-label="anchor" href="#documentation-0-8-1"></a></h3>
<ul><li>Added vignette ‘Futures in R: Common issues with solutions’.</li>
</ul></div>
<div class="section level3">
<h3 id="globals-0-8-1">Globals<a class="anchor" aria-label="anchor" href="#globals-0-8-1"></a></h3>
<ul><li>
<code>eager()</code> and <code><a href="../reference/multicore.html">multicore()</a></code> gained argument <code>globals</code>, where <code>globals = TRUE</code> will validate that all global variables identified can be located already before the future is created. This provides the means for providing the same tests on global variables with eager and multicore futures as with lazy futures.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-8-1">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-8-1"></a></h3>
<ul><li>
<code>lazy(sum(x, ...), globals = TRUE)</code> now properly passes <code>...</code> from the function from which the future is setup. If not called within a function or called within a function without <code>...</code> arguments, an informative error message is thrown.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.8.0" id="version-080">Version 0.8.0<small>2015-09-07</small><a class="anchor" aria-label="anchor" href="#version-080"></a></h2>
<div class="section level3">
<h3 id="new-features-0-8-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-8-0"></a></h3>
<ul><li><p><code>plan("default")</code> resets to the default strategy, which is synchronous eager evaluation unless option <code>future_plan</code> or environment variable <code>R_FUTURE_PLAN</code> has been set.</p></li>
<li><p><code>availableCores("mc.cores")</code> returns <code>getOption("mc.cores") + 1L</code>, because option <code>mc.cores</code> specifies “allowed number of <em>additional</em> R processes” to be used in addition to the main R process.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-8-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-8-0"></a></h3>
<ul><li>
<code>plan(future::lazy)</code> and similar gave errors.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.7.0" id="version-070">Version 0.7.0<small>2015-07-14</small><a class="anchor" aria-label="anchor" href="#version-070"></a></h2>
<div class="section level3">
<h3 id="new-features-0-7-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-7-0"></a></h3>
<ul><li><p><code><a href="../reference/multicore.html">multicore()</a></code> gained argument <code>maxCores</code>, which makes it possible to use for instance <code>plan(multicore, maxCores = 4L)</code>.</p></li>
<li><p>Add <code>availableMulticore()</code> [from (in-house) <strong>async</strong> package].</p></li>
</ul></div>
<div class="section level3">
<h3 id="documentation-0-7-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-0-7-0"></a></h3>
<ul><li>More colorful <code>demo("mandelbrot", package = "future")</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-7-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-7-0"></a></h3>
<ul><li><p>ROBUSTNESS: <code><a href="../reference/multicore.html">multicore()</a></code> blocks until one of the CPU cores is available, iff all are currently occupied by other multicore futures.</p></li>
<li><p><code>old &lt;- plan(new)</code> now returns the old plan/strategy (was the newly set one).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.6.0" id="version-060">Version 0.6.0<small>2015-06-19</small><a class="anchor" aria-label="anchor" href="#version-060"></a></h2>
<div class="section level3">
<h3 id="new-features-0-6-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-6-0"></a></h3>
<ul><li>Add multicore futures, which are futures that are resolved asynchronously in a separate process. These are only supported on Unix-like systems, but not on Windows.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.5.1" id="version-051">Version 0.5.1<a class="anchor" aria-label="anchor" href="#version-051"></a></h2>
<div class="section level3">
<h3 id="new-features-0-5-1">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-5-1"></a></h3>
<ul><li><p>Eager and lazy futures now records the result internally such that the expression is only evaluated once, even if their error values are requested multiple times.</p></li>
<li><p>Eager futures are always created regardless of error or not.</p></li>
<li><p>All <code>Future</code> objects are environments themselves that record the expression, the call environment and optional variables.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.5.0" id="version-050">Version 0.5.0<a class="anchor" aria-label="anchor" href="#version-050"></a></h2>
<div class="section level3">
<h3 id="globals-0-5-0">Globals<a class="anchor" aria-label="anchor" href="#globals-0-5-0"></a></h3>
<ul><li>
<code>lazy()</code> “freezes” global variables at the time when the future is created. This way the result of a lazy future is more likely to be the same as an ‘eager’ future. This is also how globals are likely to be handled by asynchronous futures.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.4.2" id="version-042">Version 0.4.2<a class="anchor" aria-label="anchor" href="#version-042"></a></h2>
<div class="section level3">
<h3 id="new-features-0-4-2">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-4-2"></a></h3>
<ul><li>
<code><a href="../reference/plan.html">plan()</a></code> records the call.</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-0-4-2">Documentation<a class="anchor" aria-label="anchor" href="#documentation-0-4-2"></a></h3>
<ul><li>Added <code>demo("mandelbrot", package = "future")</code>, which can be re-used by other future packages.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.4.1" id="version-041">Version 0.4.1<a class="anchor" aria-label="anchor" href="#version-041"></a></h2>
<div class="section level3">
<h3 id="new-features-0-4-1">New Features<a class="anchor" aria-label="anchor" href="#new-features-0-4-1"></a></h3>
<ul><li><p>Added <code><a href="../reference/plan.html">plan()</a></code>.</p></li>
<li><p>Added eager future - useful for troubleshooting.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.4.0" id="version-040">Version 0.4.0<a class="anchor" aria-label="anchor" href="#version-040"></a></h2>
<ul><li>Distilled Future API from (in-house) <strong>async</strong> package.</li>
</ul></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7</p> and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9005.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'aa6e02fc501886fb0f7c91ac4e300456',
    indexName: 'futureverse',
    algoliaOptions: { 'facetFilters': ['project:future'] },
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

