<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Future for R: Text and Message Output â€¢ future</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="A Future for R: Text and Message Output">
<meta property="og:description" content="future">
<meta property="og:image" content="https://future.futureverse.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">future</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.23.0-9004</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/future-1-overview.html">A Future for R: A Comprehensive Overview</a>
    </li>
    <li>
      <a href="../articles/future-2-output.html">A Future for R: Text and Message Output</a>
    </li>
    <li>
      <a href="../articles/future-3-topologies.html">A Future for R: Future Topologies</a>
    </li>
    <li>
      <a href="../articles/future-4-issues.html">A Future for R: Common Issues with Solutions</a>
    </li>
    <li>
      <a href="../articles/future-4-non-exportable-objects.html">A Future for R: Non-Exportable Objects</a>
    </li>
    <li>
      <a href="../articles/future-5-startup.html">A Future for R: Controlling Default Future Strategy</a>
    </li>
    <li>
      <a href="../articles/future-6-future-api-backend-specification.html">A Future for R: Future API Backend Specification</a>
    </li>
    <li>
      <a href="../articles/future-7-for-package-developers.html">A Future for R: Best Practices for Package Developers</a>
    </li>
    <li>
      <a href="../articles/future-8-how-future-is-validated.html">A Future for R: How the Future Framework is Validated</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://www.futureverse.org/" class="external-link">
    <span class="fas fa-fast-backward"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://BiocParallel.FutureParam.futureverse.org" class="external-link">BiocParallel.FutureParam</a>
    </li>
    <li>
      <a href="https://doFuture.futureverse.org" class="external-link">doFuture</a>
    </li>
    <li>
      <a href="https://furrr.futureverse.org" class="external-link">furrr</a>
    </li>
    <li>
      <a href="https://future.futureverse.org">future</a>
    </li>
    <li>
      <a href="https://future.apply.futureverse.org" class="external-link">future.apply</a>
    </li>
    <li>
      <a href="https://future.batchtools.futureverse.org" class="external-link">future.batchtools</a>
    </li>
    <li>
      <a href="https://future.callr.futureverse.org" class="external-link">future.callr</a>
    </li>
    <li>
      <a href="https://future.tests.futureverse.org" class="external-link">future.tests</a>
    </li>
    <li>
      <a href="https://globals.futureverse.org" class="external-link">globals</a>
    </li>
    <li>
      <a href="https://listenv.futureverse.org" class="external-link">listenv</a>
    </li>
    <li>
      <a href="https://parallelly.futureverse.org" class="external-link">parallelly</a>
    </li>
    <li>
      <a href="https://progressr.futureverse.org" class="external-link">progressr</a>
    </li>
    <li>
      <a href="https://future.mapreduce.futureverse.org" class="external-link">future.mapreduce (experimental)</a>
    </li>
    <li>
      <a href="https://marshal.futureverse.org" class="external-link">marshal (experimental)</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://cloud.r-project.org/package=future" class="external-link">
    <span class="fab fa-r-project"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/HenrikBengtsson/future/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>A Future for R: Text and Message Output</h1>
                        <h4 data-toc-skip class="author">Henrik Bengtsson</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/HenrikBengtsson/future/blob/HEAD/vignettes/future-2-output.md.rsp" class="external-link"><code>vignettes/future-2-output.md.rsp</code></a></small>
      <div class="hidden name"><code>future-2-output.md.rsp</code></div>

    </div>

    
    
<p>Futures will <em>relay</em> output produced by functions such as <code><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat()</a></code>, <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> and <code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code>. More specifically, output sent to the standard output (stdout) while a future is evaluated will be captured and <em>re-outputted ("relayed") when the value of the future is queried</em>. Messages produced by <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code>, which formally are R conditions are also captured and resignaled ("relayed") as messages in the main R session. Importantly, this works identically regardless of future backend used.</p>
<p>For simplicitly, lets start with an illustration on how standard output ("stdout") is captured and relayed:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(<span class="st">"future"</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">plan</span>(multisession)

<span class="op">&gt;</span><span class="st"> </span>fa &lt;-<span class="st"> </span><span class="kw">future</span>({ <span class="kw">cat</span>(<span class="st">"Hello world!</span><span class="ch">\n</span><span class="st">"</span>); <span class="kw">print</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>); 42L })
<span class="op">&gt;</span><span class="st"> </span>fb &lt;-<span class="st"> </span><span class="kw">future</span>({ <span class="kw">str</span>(iris); <span class="kw">summary</span>(iris) })

<span class="op">&gt;</span><span class="st"> </span>a &lt;-<span class="st"> </span><span class="kw">value</span>(fa)
Hello world<span class="op">!</span>
[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>
<span class="op">&gt;</span><span class="st"> </span>b &lt;-<span class="st"> </span><span class="kw">value</span>(fb)
<span class="st">'data.frame'</span><span class="op">:</span><span class="st">   </span><span class="dv">150</span> obs. of  <span class="dv">5</span> variables<span class="op">:</span>
<span class="st"> </span><span class="er">$</span><span class="st"> </span>Sepal.Length<span class="op">:</span><span class="st"> </span>num  <span class="fl">5.1</span> <span class="fl">4.9</span> <span class="fl">4.7</span> <span class="fl">4.6</span> <span class="dv">5</span> <span class="fl">5.4</span> <span class="fl">4.6</span> <span class="dv">5</span> <span class="fl">4.4</span> <span class="fl">4.9</span> ...
 <span class="op">$</span><span class="st"> </span>Sepal.Width <span class="op">:</span><span class="st"> </span>num  <span class="fl">3.5</span> <span class="dv">3</span> <span class="fl">3.2</span> <span class="fl">3.1</span> <span class="fl">3.6</span> <span class="fl">3.9</span> <span class="fl">3.4</span> <span class="fl">3.4</span> <span class="fl">2.9</span> <span class="fl">3.1</span> ...
 <span class="op">$</span><span class="st"> </span>Petal.Length<span class="op">:</span><span class="st"> </span>num  <span class="fl">1.4</span> <span class="fl">1.4</span> <span class="fl">1.3</span> <span class="fl">1.5</span> <span class="fl">1.4</span> <span class="fl">1.7</span> <span class="fl">1.4</span> <span class="fl">1.5</span> <span class="fl">1.4</span> <span class="fl">1.5</span> ...
 <span class="op">$</span><span class="st"> </span>Petal.Width <span class="op">:</span><span class="st"> </span>num  <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.4</span> <span class="fl">0.3</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.1</span> ...
 <span class="op">$</span><span class="st"> </span>Species     <span class="op">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">3</span> levels <span class="st">"setosa"</span>,<span class="st">"versicolor"</span>,..<span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...

<span class="op">&gt;</span><span class="st"> </span>a
[<span class="dv">1</span>] <span class="dv">42</span>
<span class="op">&gt;</span><span class="st"> </span>b
  Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species  
 Min.   <span class="op">:</span><span class="fl">4.300</span>   Min.   <span class="op">:</span><span class="fl">2.000</span>   Min.   <span class="op">:</span><span class="fl">1.000</span>   Min.   <span class="op">:</span><span class="fl">0.100</span>   setosa    <span class="op">:</span><span class="dv">50</span>  
 1st Qu.<span class="op">:</span><span class="fl">5.100</span>   1st Qu.<span class="op">:</span><span class="fl">2.800</span>   1st Qu.<span class="op">:</span><span class="fl">1.600</span>   1st Qu.<span class="op">:</span><span class="fl">0.300</span>   versicolor<span class="op">:</span><span class="dv">50</span>  
 Median <span class="op">:</span><span class="fl">5.800</span>   Median <span class="op">:</span><span class="fl">3.000</span>   Median <span class="op">:</span><span class="fl">4.350</span>   Median <span class="op">:</span><span class="fl">1.300</span>   virginica <span class="op">:</span><span class="dv">50</span>  
 Mean   <span class="op">:</span><span class="fl">5.843</span>   Mean   <span class="op">:</span><span class="fl">3.057</span>   Mean   <span class="op">:</span><span class="fl">3.758</span>   Mean   <span class="op">:</span><span class="fl">1.199</span>                  
 3rd Qu.<span class="op">:</span><span class="fl">6.400</span>   3rd Qu.<span class="op">:</span><span class="fl">3.300</span>   3rd Qu.<span class="op">:</span><span class="fl">5.100</span>   3rd Qu.<span class="op">:</span><span class="fl">1.800</span>                  
 Max.   <span class="op">:</span><span class="fl">7.900</span>   Max.   <span class="op">:</span><span class="fl">4.400</span>   Max.   <span class="op">:</span><span class="fl">6.900</span>   Max.   <span class="op">:</span><span class="fl">2.500</span></code></pre></div>
<p>Note that the captured standard output (stdout) will be relayed <em>each</em> time <code><a href="../reference/value.html">value()</a></code> is called, e.g.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>a &lt;-<span class="st"> </span><span class="kw">value</span>(fa)
Hello world<span class="op">!</span>
[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>

<span class="op">&gt;</span><span class="st"> </span>a &lt;-<span class="st"> </span><span class="kw">value</span>(fa)
Hello world<span class="op">!</span>
[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></code></pre></div>
<p>Output is relayed the same way when using future assignments (<code>%&lt;-%</code>). For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(<span class="st">"future"</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">plan</span>(multisession)

<span class="op">&gt;</span><span class="st"> </span>a <span class="op">%&lt;-%</span><span class="st"> </span>{ <span class="kw">cat</span>(<span class="st">"Hello world!</span><span class="ch">\n</span><span class="st">"</span>); <span class="kw">print</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>); 42L }
<span class="op">&gt;</span><span class="st"> </span>b <span class="op">%&lt;-%</span><span class="st"> </span>{ <span class="kw">str</span>(iris); <span class="kw">summary</span>(iris) }

<span class="op">&gt;</span><span class="st"> </span>a
Hello world<span class="op">!</span>
[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>
[<span class="dv">1</span>] <span class="dv">42</span>
<span class="op">&gt;</span><span class="st"> </span>b
<span class="st">'data.frame'</span><span class="op">:</span><span class="st">   </span><span class="dv">150</span> obs. of  <span class="dv">5</span> variables<span class="op">:</span>
<span class="st"> </span><span class="er">$</span><span class="st"> </span>Sepal.Length<span class="op">:</span><span class="st"> </span>num  <span class="fl">5.1</span> <span class="fl">4.9</span> <span class="fl">4.7</span> <span class="fl">4.6</span> <span class="dv">5</span> <span class="fl">5.4</span> <span class="fl">4.6</span> <span class="dv">5</span> <span class="fl">4.4</span> <span class="fl">4.9</span> ...
 <span class="op">$</span><span class="st"> </span>Sepal.Width <span class="op">:</span><span class="st"> </span>num  <span class="fl">3.5</span> <span class="dv">3</span> <span class="fl">3.2</span> <span class="fl">3.1</span> <span class="fl">3.6</span> <span class="fl">3.9</span> <span class="fl">3.4</span> <span class="fl">3.4</span> <span class="fl">2.9</span> <span class="fl">3.1</span> ...
 <span class="op">$</span><span class="st"> </span>Petal.Length<span class="op">:</span><span class="st"> </span>num  <span class="fl">1.4</span> <span class="fl">1.4</span> <span class="fl">1.3</span> <span class="fl">1.5</span> <span class="fl">1.4</span> <span class="fl">1.7</span> <span class="fl">1.4</span> <span class="fl">1.5</span> <span class="fl">1.4</span> <span class="fl">1.5</span> ...
 <span class="op">$</span><span class="st"> </span>Petal.Width <span class="op">:</span><span class="st"> </span>num  <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.4</span> <span class="fl">0.3</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.1</span> ...
 <span class="op">$</span><span class="st"> </span>Species     <span class="op">:</span><span class="st"> </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">3</span> levels <span class="st">"setosa"</span>,<span class="st">"versicolor"</span>,..<span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...
  Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species  
 Min.   <span class="op">:</span><span class="fl">4.300</span>   Min.   <span class="op">:</span><span class="fl">2.000</span>   Min.   <span class="op">:</span><span class="fl">1.000</span>   Min.   <span class="op">:</span><span class="fl">0.100</span>   setosa    <span class="op">:</span><span class="dv">50</span>  
 1st Qu.<span class="op">:</span><span class="fl">5.100</span>   1st Qu.<span class="op">:</span><span class="fl">2.800</span>   1st Qu.<span class="op">:</span><span class="fl">1.600</span>   1st Qu.<span class="op">:</span><span class="fl">0.300</span>   versicolor<span class="op">:</span><span class="dv">50</span>  
 Median <span class="op">:</span><span class="fl">5.800</span>   Median <span class="op">:</span><span class="fl">3.000</span>   Median <span class="op">:</span><span class="fl">4.350</span>   Median <span class="op">:</span><span class="fl">1.300</span>   virginica <span class="op">:</span><span class="dv">50</span>  
 Mean   <span class="op">:</span><span class="fl">5.843</span>   Mean   <span class="op">:</span><span class="fl">3.057</span>   Mean   <span class="op">:</span><span class="fl">3.758</span>   Mean   <span class="op">:</span><span class="fl">1.199</span>                  
 3rd Qu.<span class="op">:</span><span class="fl">6.400</span>   3rd Qu.<span class="op">:</span><span class="fl">3.300</span>   3rd Qu.<span class="op">:</span><span class="fl">5.100</span>   3rd Qu.<span class="op">:</span><span class="fl">1.800</span>                  
 Max.   <span class="op">:</span><span class="fl">7.900</span>   Max.   <span class="op">:</span><span class="fl">4.400</span>   Max.   <span class="op">:</span><span class="fl">6.900</span>   Max.   <span class="op">:</span><span class="fl">2.500</span>                  </code></pre></div>
<p>Note how the captured output is relayed followed by the printing of the value. Also, since the future value is only queried once when using future assignments, or more specifically when using promises, the output is only relayed once. For example, querying <code>a</code> again will only print its value, because it is now a regular R object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>a
[<span class="dv">1</span>] <span class="dv">42</span>
<span class="op">&gt;</span><span class="st"> </span>a
[<span class="dv">1</span>] <span class="dv">42</span></code></pre></div>
<p>Next, lets see what happens if we use <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> to produce output:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(<span class="st">"future"</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">plan</span>(multisession)
<span class="op">&gt;</span><span class="st"> </span>fa &lt;-<span class="st"> </span><span class="kw">future</span>({ <span class="kw">message</span>(<span class="st">"Hello world!"</span>); 42L })
<span class="op">&gt;</span><span class="st"> </span><span class="kw">value</span>(fa)
Hello world<span class="op">!</span>
[<span class="dv">1</span>] <span class="dv">42</span></code></pre></div>
<p>Note that contrary to the captured stdout, which is captured as one single block output, messages are conditions that are captured separately. Unfortunately, it is <em>not</em> possible to preserve the ordering of interweaved stdout and message output. When using futures, stdout output will always be relayed first followed by each of the individual conditions captured. For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(<span class="st">"future"</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">plan</span>(multisession)
<span class="op">&gt;</span><span class="st"> </span>fa &lt;-<span class="st"> </span><span class="kw">future</span>({ <span class="kw">message</span>(<span class="st">"Hello"</span>); <span class="kw">print</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>); <span class="kw">message</span>(<span class="st">"world!"</span>); <span class="kw">cat</span>(<span class="st">"ping</span><span class="ch">\n</span><span class="st">"</span>); 42L })
<span class="op">&gt;</span><span class="st"> </span><span class="kw">value</span>(fa)
[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>   ## &lt;= stdout as a single ...
ping        ## &lt;= ... block of output
Hello       ## &lt;= 1st message
world<span class="op">!</span><span class="st">      </span>## &lt;= 2nd message
[<span class="dv">1</span>] <span class="dv">42</span></code></pre></div>
<div class="section level2">
<h2 id="future-frontends">Future frontends<a class="anchor" aria-label="anchor" href="#future-frontends"></a>
</h2>
<p>The output is relayed automatically also when using frontends such as <a href="https://cran.r-project.org/package=future.apply" class="external-link">future.apply</a> or <a href="https://cran.r-project.org/package=foreach" class="external-link">foreach</a> with <a href="https://cran.r-project.org/package=doFuture" class="external-link">doFuture</a>. Again, it works with any future backend. For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(<span class="st">"future.apply"</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">plan</span>(future.callr<span class="op">::</span>callr)

<span class="op">&gt;</span><span class="st"> </span>y &lt;-<span class="st"> </span><span class="kw">future_lapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">FUN =</span> <span class="cf">function</span>(x) { <span class="kw">cat</span>(<span class="st">"x ="</span>, x, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>); <span class="kw">message</span>(<span class="st">"x : "</span>, x); <span class="kw">sqrt</span>(x) })
x =<span class="st"> </span><span class="dv">1</span> 
x =<span class="st"> </span><span class="dv">2</span> 
x =<span class="st"> </span><span class="dv">3</span> 
x <span class="op">:</span><span class="st"> </span><span class="dv">1</span>  ## &lt;= 1st message
x <span class="op">:</span><span class="st"> </span><span class="dv">2</span>  ## &lt;= 2nd message
x <span class="op">:</span><span class="st"> </span><span class="dv">3</span>  ## &lt;= 3rd message

<span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(y)
List of <span class="dv">3</span>
 <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>num <span class="dv">1</span>
 <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>num <span class="fl">1.41</span>
 <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>num <span class="fl">1.73</span></code></pre></div>
<p>Equivalently,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(<span class="st">"doFuture"</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">registerDoFuture</span>()
<span class="op">&gt;</span><span class="st"> </span><span class="kw">plan</span>(future.callr<span class="op">::</span>callr)

<span class="op">&gt;</span><span class="st"> </span>y &lt;-<span class="st"> </span><span class="kw">foreach</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) <span class="op">%dopar%</span><span class="st"> </span>{ <span class="kw">cat</span>(<span class="st">"x ="</span>, x, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>);  <span class="kw">message</span>(<span class="st">"x : "</span>, x); <span class="kw">sqrt</span>(x) }
x =<span class="st"> </span><span class="dv">1</span> 
x =<span class="st"> </span><span class="dv">2</span> 
x =<span class="st"> </span><span class="dv">3</span>
x <span class="op">:</span><span class="st"> </span><span class="dv">1</span>  ## &lt;= 1st message
x <span class="op">:</span><span class="st"> </span><span class="dv">2</span>  ## &lt;= 2nd message
x <span class="op">:</span><span class="st"> </span><span class="dv">3</span>  ## &lt;= 3rd message

<span class="op">&gt;</span><span class="st"> </span><span class="kw">str</span>(y)
List of <span class="dv">3</span>
 <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>num <span class="dv">1</span>
 <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>num <span class="fl">1.41</span>
 <span class="op">$</span><span class="st"> </span><span class="er">:</span><span class="st"> </span>num <span class="fl">1.73</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="capturing-output">Capturing output<a class="anchor" aria-label="anchor" href="#capturing-output"></a>
</h2>
<p>To capture the output produced by futures, use <code><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output()</a></code> as you would do when capturing output elsewhere in R. For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(<span class="st">"future"</span>)
<span class="op">&gt;</span><span class="st"> </span>fa &lt;-<span class="st"> </span><span class="kw">future</span>({ <span class="kw">cat</span>(<span class="st">"Hello world!</span><span class="ch">\n</span><span class="st">"</span>); <span class="kw">print</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>); 42L })
<span class="op">&gt;</span><span class="st"> </span>stdout &lt;-<span class="st"> </span><span class="kw">capture.output</span>(a &lt;-<span class="st"> </span><span class="kw">value</span>(fa))
<span class="op">&gt;</span><span class="st"> </span>stdout
[<span class="dv">1</span>] <span class="st">"Hello world!"</span> <span class="st">"[1] 1 2 3"</span>
<span class="op">&gt;</span><span class="st"> </span>a
[<span class="dv">1</span>] <span class="dv">42</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="suppressing-messages">Suppressing messages<a class="anchor" aria-label="anchor" href="#suppressing-messages"></a>
</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(<span class="st">"future"</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">plan</span>(multisession)
<span class="op">&gt;</span><span class="st"> </span>fa &lt;-<span class="st"> </span><span class="kw">future</span>({ <span class="kw">message</span>(<span class="st">"Hello"</span>); <span class="kw">print</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>); <span class="kw">message</span>(<span class="st">"world!"</span>); <span class="kw">cat</span>(<span class="st">"ping</span><span class="ch">\n</span><span class="st">"</span>); 42L })
<span class="op">&gt;</span><span class="st"> </span><span class="kw">suppressMessages</span>(a &lt;-<span class="st"> </span><span class="kw">value</span>(fa))
[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>
ping
<span class="op">&gt;</span><span class="st"> </span>a
[<span class="dv">1</span>] <span class="dv">42</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="known-limitations">Known limitations<a class="anchor" aria-label="anchor" href="#known-limitations"></a>
</h2>
<p>It is only the standard output that is relayed. It is <em>not possible</em> to relay output send to the standard error (stderr), e.g. output by <code>cat(..., file = stderr())</code> will be lost. This is due to a <a href="https://github.com/HenrikBengtsson/Wishlist-for-R/issues/55" class="external-link">limitation in R</a>, preventing us from capturing stderr in a reliable way, particularity across all backends. However, note that the captured messages by <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> are outputted to stderr (as expected) when resignaled/relayed.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1 and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9003.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'aa6e02fc501886fb0f7c91ac4e300456',
    indexName: 'futureverse',
    algoliaOptions: { 'facetFilters': ['project:future'] },
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
