<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Future for R: Text and Message Output • future</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="A Future for R: Text and Message Output">
<meta property="og:description" content="future">
<meta property="og:image" content="https://future.futureverse.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">future</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.33.1-9007</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/future-1-overview.html">A Future for R: A Comprehensive Overview</a>
    </li>
    <li>
      <a href="../articles/future-2-output.html">A Future for R: Text and Message Output</a>
    </li>
    <li>
      <a href="../articles/future-3-topologies.html">A Future for R: Future Topologies</a>
    </li>
    <li>
      <a href="../articles/future-4-issues.html">A Future for R: Common Issues with Solutions</a>
    </li>
    <li>
      <a href="../articles/future-4-non-exportable-objects.html">A Future for R: Non-Exportable Objects</a>
    </li>
    <li>
      <a href="../articles/future-5-startup.html">A Future for R: Controlling Default Future Strategy</a>
    </li>
    <li>
      <a href="../articles/future-6-future-api-backend-specification.html">A Future for R: Future API Backend Specification</a>
    </li>
    <li>
      <a href="../articles/future-7-for-package-developers.html">A Future for R: Best Practices for Package Developers</a>
    </li>
    <li>
      <a href="../articles/future-8-how-future-is-validated.html">A Future for R: How the Future Framework is Validated</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://www.futureverse.org/" class="external-link">
    <span class="fas fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://doFuture.futureverse.org" class="external-link">doFuture</a>
    </li>
    <li>
      <a href="https://furrr.futureverse.org" class="external-link">furrr</a>
    </li>
    <li>
      <a href="https://future.futureverse.org">future</a>
    </li>
    <li>
      <a href="https://future.apply.futureverse.org" class="external-link">future.apply</a>
    </li>
    <li>
      <a href="https://future.batchtools.futureverse.org" class="external-link">future.batchtools</a>
    </li>
    <li>
      <a href="https://future.callr.futureverse.org" class="external-link">future.callr</a>
    </li>
    <li>
      <a href="https://future.tests.futureverse.org" class="external-link">future.tests</a>
    </li>
    <li>
      <a href="https://globals.futureverse.org" class="external-link">globals</a>
    </li>
    <li>
      <a href="https://listenv.futureverse.org" class="external-link">listenv</a>
    </li>
    <li>
      <a href="https://parallelly.futureverse.org" class="external-link">parallelly</a>
    </li>
    <li>
      <a href="https://progressr.futureverse.org" class="external-link">progressr</a>
    </li>
    <li>
      <a href="https://BiocParallel.FutureParam.futureverse.org" class="external-link">BiocParallel.FutureParam (experimental)</a>
    </li>
    <li>
      <a href="https://future.tools.futureverse.org" class="external-link">future.tools (experimental)</a>
    </li>
    <li>
      <a href="https://future.mirai.futureverse.org" class="external-link">future.mirai (experimental)</a>
    </li>
    <li>
      <a href="https://future.mapreduce.futureverse.org" class="external-link">future.mapreduce (experimental)</a>
    </li>
    <li>
      <a href="https://marshal.futureverse.org" class="external-link">marshal (experimental)</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://cloud.r-project.org/package=future" class="external-link">
    <span class="fab fa-r-project"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/HenrikBengtsson/future/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>A Future for R: Text and Message Output</h1>
                        <h4 data-toc-skip class="author">Henrik
Bengtsson</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/HenrikBengtsson/future/blob/HEAD/vignettes/future-2-output.md.rsp" class="external-link"><code>vignettes/future-2-output.md.rsp</code></a></small>
      <div class="hidden name"><code>future-2-output.md.rsp</code></div>

    </div>

    
    
<p>Futures will <em>relay</em> output produced by functions such as
<code><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat()</a></code>, <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> and <code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code>. More
specifically, output sent to the standard output (stdout) while a future
is evaluated will be captured and <em>re-outputted (“relayed”) when the
value of the future is queried</em>. Messages produced by
<code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code>, which formally are R conditions are also
captured and resignaled (“relayed”) as messages in the main R session.
Importantly, this works identically regardless of future backend
used.</p>
<p>For simplicitly, lets start with an illustration on how standard
output (“stdout”) is captured and relayed:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(future)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">plan</span>(multisession)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="sc">&gt;</span> fa <span class="ot">&lt;-</span> <span class="fu">future</span>({ <span class="fu">cat</span>(<span class="st">"Hello world!</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>); <span class="dv">42</span><span class="dt">L</span> })</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">&gt;</span> fb <span class="ot">&lt;-</span> <span class="fu">future</span>({ <span class="fu">str</span>(iris); <span class="fu">summary</span>(iris) })</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="sc">&gt;</span> a <span class="ot">&lt;-</span> <span class="fu">value</span>(fa)</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>Hello world<span class="sc">!</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="sc">&gt;</span> b <span class="ot">&lt;-</span> <span class="fu">value</span>(fb)</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="st">'data.frame'</span><span class="sc">:</span>   <span class="dv">150</span> obs. of  <span class="dv">5</span> variables<span class="sc">:</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a> <span class="er">$</span> Sepal.Length<span class="sc">:</span> num  <span class="fl">5.1</span> <span class="fl">4.9</span> <span class="fl">4.7</span> <span class="fl">4.6</span> <span class="dv">5</span> <span class="fl">5.4</span> <span class="fl">4.6</span> <span class="dv">5</span> <span class="fl">4.4</span> <span class="fl">4.9</span> ...</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a> <span class="sc">$</span> Sepal.Width <span class="sc">:</span> num  <span class="fl">3.5</span> <span class="dv">3</span> <span class="fl">3.2</span> <span class="fl">3.1</span> <span class="fl">3.6</span> <span class="fl">3.9</span> <span class="fl">3.4</span> <span class="fl">3.4</span> <span class="fl">2.9</span> <span class="fl">3.1</span> ...</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a> <span class="sc">$</span> Petal.Length<span class="sc">:</span> num  <span class="fl">1.4</span> <span class="fl">1.4</span> <span class="fl">1.3</span> <span class="fl">1.5</span> <span class="fl">1.4</span> <span class="fl">1.7</span> <span class="fl">1.4</span> <span class="fl">1.5</span> <span class="fl">1.4</span> <span class="fl">1.5</span> ...</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a> <span class="sc">$</span> Petal.Width <span class="sc">:</span> num  <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.4</span> <span class="fl">0.3</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.1</span> ...</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a> <span class="sc">$</span> Species     <span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">3</span> levels <span class="st">"setosa"</span>,<span class="st">"versicolor"</span>,..<span class="sc">:</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="sc">&gt;</span> a</span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">42</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="sc">&gt;</span> b</span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a>  Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species  </span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a> Min.   <span class="sc">:</span><span class="fl">4.300</span>   Min.   <span class="sc">:</span><span class="fl">2.000</span>   Min.   <span class="sc">:</span><span class="fl">1.000</span>   Min.   <span class="sc">:</span><span class="fl">0.100</span>   setosa    <span class="sc">:</span><span class="dv">50</span>  </span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a> <span class="dv">1</span>st Qu.<span class="sc">:</span><span class="fl">5.100</span>   <span class="dv">1</span>st Qu.<span class="sc">:</span><span class="fl">2.800</span>   <span class="dv">1</span>st Qu.<span class="sc">:</span><span class="fl">1.600</span>   <span class="dv">1</span>st Qu.<span class="sc">:</span><span class="fl">0.300</span>   versicolor<span class="sc">:</span><span class="dv">50</span>  </span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a> Median <span class="sc">:</span><span class="fl">5.800</span>   Median <span class="sc">:</span><span class="fl">3.000</span>   Median <span class="sc">:</span><span class="fl">4.350</span>   Median <span class="sc">:</span><span class="fl">1.300</span>   virginica <span class="sc">:</span><span class="dv">50</span>  </span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a> Mean   <span class="sc">:</span><span class="fl">5.843</span>   Mean   <span class="sc">:</span><span class="fl">3.057</span>   Mean   <span class="sc">:</span><span class="fl">3.758</span>   Mean   <span class="sc">:</span><span class="fl">1.199</span>                  </span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a> <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">6.400</span>   <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">3.300</span>   <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">5.100</span>   <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">1.800</span>                  </span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a> Max.   <span class="sc">:</span><span class="fl">7.900</span>   Max.   <span class="sc">:</span><span class="fl">4.400</span>   Max.   <span class="sc">:</span><span class="fl">6.900</span>   Max.   <span class="sc">:</span><span class="fl">2.500</span></span></code></pre></div>
<p>Note that the captured standard output (stdout) will be relayed
<em>each</em> time <code><a href="../reference/value.html">value()</a></code> is called, e.g.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="sc">&gt;</span> a <span class="ot">&lt;-</span> <span class="fu">value</span>(fa)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>Hello world<span class="sc">!</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="sc">&gt;</span> a <span class="ot">&lt;-</span> <span class="fu">value</span>(fa)</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>Hello world<span class="sc">!</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span></code></pre></div>
<p>Output is relayed the same way when using future assignments
(<code>%&lt;-%</code>). For example,</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(future)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">plan</span>(multisession)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="sc">&gt;</span> a <span class="sc">%&lt;-%</span> { <span class="fu">cat</span>(<span class="st">"Hello world!</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>); <span class="dv">42</span><span class="dt">L</span> }</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="sc">&gt;</span> b <span class="sc">%&lt;-%</span> { <span class="fu">str</span>(iris); <span class="fu">summary</span>(iris) }</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="sc">&gt;</span> a</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>Hello world<span class="sc">!</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">42</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="sc">&gt;</span> b</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="st">'data.frame'</span><span class="sc">:</span>   <span class="dv">150</span> obs. of  <span class="dv">5</span> variables<span class="sc">:</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a> <span class="er">$</span> Sepal.Length<span class="sc">:</span> num  <span class="fl">5.1</span> <span class="fl">4.9</span> <span class="fl">4.7</span> <span class="fl">4.6</span> <span class="dv">5</span> <span class="fl">5.4</span> <span class="fl">4.6</span> <span class="dv">5</span> <span class="fl">4.4</span> <span class="fl">4.9</span> ...</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a> <span class="sc">$</span> Sepal.Width <span class="sc">:</span> num  <span class="fl">3.5</span> <span class="dv">3</span> <span class="fl">3.2</span> <span class="fl">3.1</span> <span class="fl">3.6</span> <span class="fl">3.9</span> <span class="fl">3.4</span> <span class="fl">3.4</span> <span class="fl">2.9</span> <span class="fl">3.1</span> ...</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a> <span class="sc">$</span> Petal.Length<span class="sc">:</span> num  <span class="fl">1.4</span> <span class="fl">1.4</span> <span class="fl">1.3</span> <span class="fl">1.5</span> <span class="fl">1.4</span> <span class="fl">1.7</span> <span class="fl">1.4</span> <span class="fl">1.5</span> <span class="fl">1.4</span> <span class="fl">1.5</span> ...</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a> <span class="sc">$</span> Petal.Width <span class="sc">:</span> num  <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.4</span> <span class="fl">0.3</span> <span class="fl">0.2</span> <span class="fl">0.2</span> <span class="fl">0.1</span> ...</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a> <span class="sc">$</span> Species     <span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">3</span> levels <span class="st">"setosa"</span>,<span class="st">"versicolor"</span>,..<span class="sc">:</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>  Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species  </span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a> Min.   <span class="sc">:</span><span class="fl">4.300</span>   Min.   <span class="sc">:</span><span class="fl">2.000</span>   Min.   <span class="sc">:</span><span class="fl">1.000</span>   Min.   <span class="sc">:</span><span class="fl">0.100</span>   setosa    <span class="sc">:</span><span class="dv">50</span>  </span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a> <span class="dv">1</span>st Qu.<span class="sc">:</span><span class="fl">5.100</span>   <span class="dv">1</span>st Qu.<span class="sc">:</span><span class="fl">2.800</span>   <span class="dv">1</span>st Qu.<span class="sc">:</span><span class="fl">1.600</span>   <span class="dv">1</span>st Qu.<span class="sc">:</span><span class="fl">0.300</span>   versicolor<span class="sc">:</span><span class="dv">50</span>  </span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a> Median <span class="sc">:</span><span class="fl">5.800</span>   Median <span class="sc">:</span><span class="fl">3.000</span>   Median <span class="sc">:</span><span class="fl">4.350</span>   Median <span class="sc">:</span><span class="fl">1.300</span>   virginica <span class="sc">:</span><span class="dv">50</span>  </span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a> Mean   <span class="sc">:</span><span class="fl">5.843</span>   Mean   <span class="sc">:</span><span class="fl">3.057</span>   Mean   <span class="sc">:</span><span class="fl">3.758</span>   Mean   <span class="sc">:</span><span class="fl">1.199</span>                  </span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a> <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">6.400</span>   <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">3.300</span>   <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">5.100</span>   <span class="dv">3</span>rd Qu.<span class="sc">:</span><span class="fl">1.800</span>                  </span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a> Max.   <span class="sc">:</span><span class="fl">7.900</span>   Max.   <span class="sc">:</span><span class="fl">4.400</span>   Max.   <span class="sc">:</span><span class="fl">6.900</span>   Max.   <span class="sc">:</span><span class="fl">2.500</span>                  </span></code></pre></div>
<p>Note how the captured output is relayed followed by the printing of
the value. Also, since the future value is only queried once when using
future assignments, or more specifically when using promises, the output
is only relayed once. For example, querying <code>a</code> again will
only print its value, because it is now a regular R object:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="sc">&gt;</span> a</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">42</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="sc">&gt;</span> a</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">42</span></span></code></pre></div>
<p>Next, lets see what happens if we use <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> to
produce output:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(future)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">plan</span>(multisession)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="sc">&gt;</span> fa <span class="ot">&lt;-</span> <span class="fu">future</span>({ <span class="fu">message</span>(<span class="st">"Hello world!"</span>); <span class="dv">42</span><span class="dt">L</span> })</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">value</span>(fa)</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>Hello world<span class="sc">!</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">42</span></span></code></pre></div>
<p>Note that contrary to the captured stdout, which is captured as one
single block output, messages are conditions that are captured
separately. Unfortunately, it is <em>not</em> possible to preserve the
ordering of interweaved stdout and message output. When using futures,
stdout output will always be relayed first followed by each of the
individual conditions captured. For example,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(future)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">plan</span>(multisession)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="sc">&gt;</span> fa <span class="ot">&lt;-</span> <span class="fu">future</span>({ <span class="fu">message</span>(<span class="st">"Hello"</span>); <span class="fu">print</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>); <span class="fu">message</span>(<span class="st">"world!"</span>); <span class="fu">cat</span>(<span class="st">"ping</span><span class="sc">\n</span><span class="st">"</span>); <span class="dv">42</span><span class="dt">L</span> })</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">value</span>(fa)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>   <span class="do">## &lt;= stdout as a single ...</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>ping        <span class="do">## &lt;= ... block of output</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>Hello       <span class="do">## &lt;= 1st message</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>world<span class="sc">!</span>      <span class="do">## &lt;= 2nd message</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">42</span></span></code></pre></div>
<div class="section level2">
<h2 id="future-frontends">Future frontends<a class="anchor" aria-label="anchor" href="#future-frontends"></a>
</h2>
<p>The output is relayed automatically also when using frontends such as
<a href="https://cran.r-project.org/package=future.apply" class="external-link">future.apply</a>
or <a href="https://cran.r-project.org/package=foreach" class="external-link">foreach</a> with
<a href="https://cran.r-project.org/package=doFuture" class="external-link">doFuture</a>.
Again, it works with any future backend. For example,</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(future.apply)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">plan</span>(future.callr<span class="sc">::</span>callr)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">&lt;-</span> <span class="fu">future_lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">FUN =</span> <span class="cf">function</span>(x) { <span class="fu">cat</span>(<span class="st">"x ="</span>, x, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">message</span>(<span class="st">"x : "</span>, x); <span class="fu">sqrt</span>(x) })</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">1</span> </span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">2</span> </span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">3</span> </span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>x <span class="sc">:</span> <span class="dv">1</span>  <span class="do">## &lt;= 1st message</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>x <span class="sc">:</span> <span class="dv">2</span>  <span class="do">## &lt;= 2nd message</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>x <span class="sc">:</span> <span class="dv">3</span>  <span class="do">## &lt;= 3rd message</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str</span>(y)</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>List of <span class="dv">3</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span> num <span class="dv">1</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span> num <span class="fl">1.41</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span> num <span class="fl">1.73</span></span></code></pre></div>
<p>Equivalently,</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(doFuture)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">registerDoFuture</span>()</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">plan</span>(future.callr<span class="sc">::</span>callr)</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="sc">&gt;</span> y <span class="ot">&lt;-</span> <span class="fu">foreach</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%dopar%</span> { <span class="fu">cat</span>(<span class="st">"x ="</span>, x, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>);  <span class="fu">message</span>(<span class="st">"x : "</span>, x); <span class="fu">sqrt</span>(x) }</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">1</span> </span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">2</span> </span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>x <span class="sc">:</span> <span class="dv">1</span>  <span class="do">## &lt;= 1st message</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>x <span class="sc">:</span> <span class="dv">2</span>  <span class="do">## &lt;= 2nd message</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>x <span class="sc">:</span> <span class="dv">3</span>  <span class="do">## &lt;= 3rd message</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str</span>(y)</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>List of <span class="dv">3</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span> num <span class="dv">1</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span> num <span class="fl">1.41</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span> num <span class="fl">1.73</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="capturing-output">Capturing output<a class="anchor" aria-label="anchor" href="#capturing-output"></a>
</h2>
<p>To capture the output produced by futures, use
<code><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output()</a></code> as you would do when capturing output
elsewhere in R. For example,</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(future)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="sc">&gt;</span> fa <span class="ot">&lt;-</span> <span class="fu">future</span>({ <span class="fu">cat</span>(<span class="st">"Hello world!</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>); <span class="dv">42</span><span class="dt">L</span> })</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="sc">&gt;</span> stdout <span class="ot">&lt;-</span> <span class="fu">capture.output</span>(a <span class="ot">&lt;-</span> <span class="fu">value</span>(fa))</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="sc">&gt;</span> stdout</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Hello world!"</span> <span class="st">"[1] 1 2 3"</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="sc">&gt;</span> a</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">42</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="suppressing-messages">Suppressing messages<a class="anchor" aria-label="anchor" href="#suppressing-messages"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(future)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">plan</span>(multisession)</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="sc">&gt;</span> fa <span class="ot">&lt;-</span> <span class="fu">future</span>({ <span class="fu">message</span>(<span class="st">"Hello"</span>); <span class="fu">print</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>); <span class="fu">message</span>(<span class="st">"world!"</span>); <span class="fu">cat</span>(<span class="st">"ping</span><span class="sc">\n</span><span class="st">"</span>); <span class="dv">42</span><span class="dt">L</span> })</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">suppressMessages</span>(a <span class="ot">&lt;-</span> <span class="fu">value</span>(fa))</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>ping</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="sc">&gt;</span> a</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">42</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="known-limitations">Known limitations<a class="anchor" aria-label="anchor" href="#known-limitations"></a>
</h2>
<p>It is only the standard output that is relayed. It is <em>not
possible</em> to relay output send to the standard error (stderr),
e.g. output by <code>cat(..., file = stderr())</code> will be lost. This
is due to a <a href="https://github.com/HenrikBengtsson/Wishlist-for-R/issues/55" class="external-link">limitation
in R</a>, preventing us from capturing stderr in a reliable way,
particularity across all backends. However, note that the captured
messages by <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> are outputted to stderr (as expected)
when resignaled/relayed.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7</p> and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9005.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'aa6e02fc501886fb0f7c91ac4e300456',
    indexName: 'futureverse',
    algoliaOptions: { 'facetFilters': ['project:future'] },
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
